import{R as y,r as q,q as lt,j as o,$ as ct,m as ut}from"./app-BvN2VGK2.js";import{A as dt}from"./AuthenticatedLayout-CofPKvkG.js";import{i as ht,D as pt,f as ft,E as mt,L as z,a as K,C as vt,A as yt,b as $,c as xt,d as G,h as bt,e as gt,g as tt,u as At,G as jt,j as Y,k as Pt,X as et,Y as rt,l as Nt,R as Ot,m as St,T as wt,n as Dt}from"./generateCategoricalChart-D_poQUOI.js";import{c as H}from"./clsx-B-dksMZM.js";import"./Actif-CGR9bzdf.js";import"./index-CQxxDfE9.js";import"./debounce-BjUTkYLf.js";var _t=["type","layout","connectNulls","ref"],Ct=["key"];function _(t){"@babel/helpers - typeof";return _=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(r){return typeof r}:function(r){return r&&typeof Symbol=="function"&&r.constructor===Symbol&&r!==Symbol.prototype?"symbol":typeof r},_(t)}function Q(t,r){if(t==null)return{};var n=kt(t,r),e,i;if(Object.getOwnPropertySymbols){var l=Object.getOwnPropertySymbols(t);for(i=0;i<l.length;i++)e=l[i],!(r.indexOf(e)>=0)&&Object.prototype.propertyIsEnumerable.call(t,e)&&(n[e]=t[e])}return n}function kt(t,r){if(t==null)return{};var n={};for(var e in t)if(Object.prototype.hasOwnProperty.call(t,e)){if(r.indexOf(e)>=0)continue;n[e]=t[e]}return n}function B(){return B=Object.assign?Object.assign.bind():function(t){for(var r=1;r<arguments.length;r++){var n=arguments[r];for(var e in n)Object.prototype.hasOwnProperty.call(n,e)&&(t[e]=n[e])}return t},B.apply(this,arguments)}function J(t,r){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var e=Object.getOwnPropertySymbols(t);r&&(e=e.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,e)}return n}function b(t){for(var r=1;r<arguments.length;r++){var n=arguments[r]!=null?arguments[r]:{};r%2?J(Object(n),!0).forEach(function(e){A(t,e,n[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):J(Object(n)).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))})}return t}function D(t){return It(t)||Tt(t)||Lt(t)||Et()}function Et(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Lt(t,r){if(t){if(typeof t=="string")return U(t,r);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return U(t,r)}}function Tt(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}function It(t){if(Array.isArray(t))return U(t)}function U(t,r){(r==null||r>t.length)&&(r=t.length);for(var n=0,e=new Array(r);n<r;n++)e[n]=t[n];return e}function Ft(t,r){if(!(t instanceof r))throw new TypeError("Cannot call a class as a function")}function Z(t,r){for(var n=0;n<r.length;n++){var e=r[n];e.enumerable=e.enumerable||!1,e.configurable=!0,"value"in e&&(e.writable=!0),Object.defineProperty(t,at(e.key),e)}}function $t(t,r,n){return r&&Z(t.prototype,r),n&&Z(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}function Bt(t,r,n){return r=V(r),Rt(t,nt()?Reflect.construct(r,n||[],V(t).constructor):r.apply(t,n))}function Rt(t,r){if(r&&(_(r)==="object"||typeof r=="function"))return r;if(r!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return Mt(t)}function Mt(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function nt(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(nt=function(){return!!t})()}function V(t){return V=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},V(t)}function Kt(t,r){if(typeof r!="function"&&r!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(r&&r.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),r&&X(t,r)}function X(t,r){return X=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,i){return e.__proto__=i,e},X(t,r)}function A(t,r,n){return r=at(r),r in t?Object.defineProperty(t,r,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[r]=n,t}function at(t){var r=Vt(t,"string");return _(r)=="symbol"?r:r+""}function Vt(t,r){if(_(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var e=n.call(t,r);if(_(e)!="object")return e;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}var C=function(t){function r(){var n;Ft(this,r);for(var e=arguments.length,i=new Array(e),l=0;l<e;l++)i[l]=arguments[l];return n=Bt(this,r,[].concat(i)),A(n,"state",{isAnimationFinished:!0,totalLength:0}),A(n,"generateSimpleStrokeDasharray",function(s,a){return"".concat(a,"px ").concat(s-a,"px")}),A(n,"getStrokeDasharray",function(s,a,c){var d=c.reduce(function(j,N){return j+N});if(!d)return n.generateSimpleStrokeDasharray(a,s);for(var p=Math.floor(s/d),f=s%d,h=a-s,m=[],u=0,v=0;u<c.length;v+=c[u],++u)if(v+c[u]>f){m=[].concat(D(c.slice(0,u)),[f-v]);break}var g=m.length%2===0?[0,h]:[h];return[].concat(D(r.repeat(c,p)),D(m),g).map(function(j){return"".concat(j,"px")}).join(", ")}),A(n,"id",At("recharts-line-")),A(n,"pathRef",function(s){n.mainCurve=s}),A(n,"handleAnimationEnd",function(){n.setState({isAnimationFinished:!0}),n.props.onAnimationEnd&&n.props.onAnimationEnd()}),A(n,"handleAnimationStart",function(){n.setState({isAnimationFinished:!1}),n.props.onAnimationStart&&n.props.onAnimationStart()}),n}return Kt(r,t),$t(r,[{key:"componentDidMount",value:function(){if(this.props.isAnimationActive){var e=this.getTotalLength();this.setState({totalLength:e})}}},{key:"componentDidUpdate",value:function(){if(this.props.isAnimationActive){var e=this.getTotalLength();e!==this.state.totalLength&&this.setState({totalLength:e})}}},{key:"getTotalLength",value:function(){var e=this.mainCurve;try{return e&&e.getTotalLength&&e.getTotalLength()||0}catch{return 0}}},{key:"renderErrorBar",value:function(e,i){if(this.props.isAnimationActive&&!this.state.isAnimationFinished)return null;var l=this.props,s=l.points,a=l.xAxis,c=l.yAxis,d=l.layout,p=l.children,f=ft(p,mt);if(!f)return null;var h=function(v,g){return{x:v.x,y:v.y,value:v.value,errorVal:tt(v.payload,g)}},m={clipPath:e?"url(#clipPath-".concat(i,")"):null};return y.createElement(z,m,f.map(function(u){return y.cloneElement(u,{key:"bar-".concat(u.props.dataKey),data:s,xAxis:a,yAxis:c,layout:d,dataPointFormatter:h})}))}},{key:"renderDots",value:function(e,i,l){var s=this.props.isAnimationActive;if(s&&!this.state.isAnimationFinished)return null;var a=this.props,c=a.dot,d=a.points,p=a.dataKey,f=K(this.props,!1),h=K(c,!0),m=d.map(function(v,g){var j=b(b(b({key:"dot-".concat(g),r:3},f),h),{},{index:g,cx:v.x,cy:v.y,value:v.value,dataKey:p,payload:v.payload,points:d});return r.renderDotItem(c,j)}),u={clipPath:e?"url(#clipPath-".concat(i?"":"dots-").concat(l,")"):null};return y.createElement(z,B({className:"recharts-line-dots",key:"dots"},u),m)}},{key:"renderCurveStatically",value:function(e,i,l,s){var a=this.props,c=a.type,d=a.layout,p=a.connectNulls;a.ref;var f=Q(a,_t),h=b(b(b({},K(f,!0)),{},{fill:"none",className:"recharts-line-curve",clipPath:i?"url(#clipPath-".concat(l,")"):null,points:e},s),{},{type:c,layout:d,connectNulls:p});return y.createElement(vt,B({},h,{pathRef:this.pathRef}))}},{key:"renderCurveWithAnimation",value:function(e,i){var l=this,s=this.props,a=s.points,c=s.strokeDasharray,d=s.isAnimationActive,p=s.animationBegin,f=s.animationDuration,h=s.animationEasing,m=s.animationId,u=s.animateNewValues,v=s.width,g=s.height,j=this.state,N=j.prevPoints,k=j.totalLength;return y.createElement(yt,{begin:p,duration:f,isActive:d,easing:h,from:{t:0},to:{t:1},key:"line-".concat(m),onAnimationEnd:this.handleAnimationEnd,onAnimationStart:this.handleAnimationStart},function(S){var P=S.t;if(N){var E=N.length/a.length,O=a.map(function(x,W){var I=Math.floor(W*E);if(N[I]){var F=N[I],w=$(F.x,x.x),it=$(F.y,x.y);return b(b({},x),{},{x:w(P),y:it(P)})}if(u){var ot=$(v*2,x.x),st=$(g/2,x.y);return b(b({},x),{},{x:ot(P),y:st(P)})}return b(b({},x),{},{x:x.x,y:x.y})});return l.renderCurveStatically(O,e,i)}var R=$(0,k),L=R(P),T;if(c){var M="".concat(c).split(/[,\s]+/gim).map(function(x){return parseFloat(x)});T=l.getStrokeDasharray(L,k,M)}else T=l.generateSimpleStrokeDasharray(k,L);return l.renderCurveStatically(a,e,i,{strokeDasharray:T})})}},{key:"renderCurve",value:function(e,i){var l=this.props,s=l.points,a=l.isAnimationActive,c=this.state,d=c.prevPoints,p=c.totalLength;return a&&s&&s.length&&(!d&&p>0||!xt(d,s))?this.renderCurveWithAnimation(e,i):this.renderCurveStatically(s,e,i)}},{key:"render",value:function(){var e,i=this.props,l=i.hide,s=i.dot,a=i.points,c=i.className,d=i.xAxis,p=i.yAxis,f=i.top,h=i.left,m=i.width,u=i.height,v=i.isAnimationActive,g=i.id;if(l||!a||!a.length)return null;var j=this.state.isAnimationFinished,N=a.length===1,k=H("recharts-line",c),S=d&&d.allowDataOverflow,P=p&&p.allowDataOverflow,E=S||P,O=G(g)?this.id:g,R=(e=K(s,!1))!==null&&e!==void 0?e:{r:3,strokeWidth:2},L=R.r,T=L===void 0?3:L,M=R.strokeWidth,x=M===void 0?2:M,W=bt(s)?s:{},I=W.clipDot,F=I===void 0?!0:I,w=T*2+x;return y.createElement(z,{className:k},S||P?y.createElement("defs",null,y.createElement("clipPath",{id:"clipPath-".concat(O)},y.createElement("rect",{x:S?h:h-m/2,y:P?f:f-u/2,width:S?m:m*2,height:P?u:u*2})),!F&&y.createElement("clipPath",{id:"clipPath-dots-".concat(O)},y.createElement("rect",{x:h-w/2,y:f-w/2,width:m+w,height:u+w}))):null,!N&&this.renderCurve(E,O),this.renderErrorBar(E,O),(N||s)&&this.renderDots(E,F,O),(!v||j)&&gt.renderCallByParent(this.props,a))}}],[{key:"getDerivedStateFromProps",value:function(e,i){return e.animationId!==i.prevAnimationId?{prevAnimationId:e.animationId,curPoints:e.points,prevPoints:i.curPoints}:e.points!==i.curPoints?{curPoints:e.points}:null}},{key:"repeat",value:function(e,i){for(var l=e.length%2!==0?[].concat(D(e),[0]):e,s=[],a=0;a<i;++a)s=[].concat(D(s),D(l));return s}},{key:"renderDotItem",value:function(e,i){var l;if(y.isValidElement(e))l=y.cloneElement(e,i);else if(ht(e))l=e(i);else{var s=i.key,a=Q(i,Ct),c=H("recharts-line-dot",typeof e!="boolean"?e.className:"");l=y.createElement(pt,B({key:s},a,{className:c}))}return l}}])}(q.PureComponent);A(C,"displayName","Line");A(C,"defaultProps",{xAxisId:0,yAxisId:0,connectNulls:!1,activeDot:!0,dot:!0,legendType:"line",stroke:"#3182bd",strokeWidth:1,fill:"#fff",points:[],isAnimationActive:!jt.isSsr,animateNewValues:!0,animationBegin:0,animationDuration:1500,animationEasing:"ease",hide:!1,label:!1});A(C,"getComposedData",function(t){var r=t.props,n=t.xAxis,e=t.yAxis,i=t.xAxisTicks,l=t.yAxisTicks,s=t.dataKey,a=t.bandSize,c=t.displayedData,d=t.offset,p=r.layout,f=c.map(function(h,m){var u=tt(h,s);return p==="horizontal"?{x:Y({axis:n,ticks:i,bandSize:a,entry:h,index:m}),y:G(u)?null:e.scale(u),value:u,payload:h}:{x:G(u)?null:n.scale(u),y:Y({axis:e,ticks:l,bandSize:a,entry:h,index:m}),value:u,payload:h}});return b({points:f,layout:p},d)});var Wt=Pt({chartName:"LineChart",GraphicalChild:C,axisComponents:[{axisType:"xAxis",AxisComp:et},{axisType:"yAxis",AxisComp:rt}],formatAxisMap:Nt});function Qt({stats:t,chartData:r,period:n}){const{user:e}=lt().props.auth,[i,l]=q.useState(!1);q.useEffect(()=>{const a=document.documentElement.getAttribute("data-theme");l(a==="dark")},[]);const s=a=>{ut.get(route("ventes.stats"),{period:a},{preserveState:!0,replace:!0})};return o.jsxs(dt,{children:[o.jsx(ct,{title:"Mes Statistiques de Ventes"}),o.jsxs("div",{className:"container mx-auto px-4 py-8",children:[o.jsxs("div",{className:"flex justify-between items-center mb-8",children:[o.jsx("h1",{className:"text-3xl font-bold",children:"Mes Statistiques de Ventes"}),o.jsx("div",{className:"join",children:["day","week","month","year"].map(a=>o.jsxs("button",{className:`join-item btn ${n===a?"btn-active":""}`,onClick:()=>s(a),children:[a==="day"&&"Aujourd'hui",a==="week"&&"Cette semaine",a==="month"&&"Ce mois",a==="year"&&"Cette année"]},a))})]}),o.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6 mb-8",children:[o.jsx("div",{className:"card bg-base-100 shadow",children:o.jsxs("div",{className:"card-body",children:[o.jsx("h2",{className:"card-title text-primary",children:"Total Ventes"}),o.jsx("p",{className:"text-4xl font-bold",children:t.total_ventes}),o.jsx("p",{className:"text-sm text-gray-500",children:"Nombre de ventes effectuées"})]})}),o.jsx("div",{className:"card bg-base-100 shadow",children:o.jsxs("div",{className:"card-body",children:[o.jsx("h2",{className:"card-title text-secondary",children:"Chiffre d'Affaires"}),o.jsxs("p",{className:"text-4xl font-bold",children:[t.total_ttc.toFixed(2)," CDF"]}),o.jsx("p",{className:"text-sm text-gray-500",children:"Montant total TTC"})]})}),o.jsx("div",{className:"card bg-base-100 shadow",children:o.jsxs("div",{className:"card-body",children:[o.jsx("h2",{className:"card-title text-accent",children:"Moyenne par Vente"}),o.jsxs("p",{className:"text-4xl font-bold",children:[t.moyenne_vente?t.moyenne_vente.toFixed(2):"0.00"," CDF"]}),o.jsx("p",{className:"text-sm text-gray-500",children:"Panier moyen"})]})})]}),o.jsx("div",{className:"card bg-base-100 shadow mb-8",children:o.jsxs("div",{className:"card-body",children:[o.jsx("h2",{className:"card-title mb-4",children:"Évolution des ventes"}),o.jsx("div",{className:"h-80",children:o.jsx(Ot,{width:"100%",height:"100%",children:o.jsxs(Wt,{data:r,children:[o.jsx(St,{strokeDasharray:"3 3"}),o.jsx(et,{dataKey:"date"}),o.jsx(rt,{}),o.jsx(wt,{contentStyle:{backgroundColor:i?"#1f2937":"#011f2f",color:i?"#d1d5db":"#fff",borderColor:i?"#4b5563":"#d1d5db"},formatter:(a,c)=>c==="Chiffre d'affaires"?[`${a} CDF`,c]:[a,c]}),o.jsx(Dt,{}),o.jsx(C,{type:"monotone",dataKey:"total",stroke:"#8884d8",name:"Chiffre d'affaires",activeDot:{r:8}}),o.jsx(C,{type:"monotone",dataKey:"count",stroke:"#82ca9d",name:"Nombre de ventes"})]})})})]})}),o.jsx("div",{className:"card bg-base-100 shadow",children:o.jsxs("div",{className:"card-body",children:[o.jsx("h2",{className:"card-title mb-4",children:"Top 5 des produits vendus"}),o.jsx("div",{className:"overflow-x-auto",children:o.jsxs("table",{className:"table",children:[o.jsx("thead",{children:o.jsxs("tr",{children:[o.jsx("th",{children:"Produit"}),o.jsx("th",{className:"text-right",children:"Quantité"}),o.jsx("th",{className:"text-right",children:"Montant TTC"})]})}),o.jsx("tbody",{children:t.top_produits.map(a=>o.jsxs("tr",{children:[o.jsx("td",{children:a.produit.nom}),o.jsx("td",{className:"text-right",children:a.total_quantite}),o.jsxs("td",{className:"text-right",children:[a.total_ttc.toFixed(2)," CDF"]})]},a.produit_id))})]})})]})})]})]})}export{Qt as default};
