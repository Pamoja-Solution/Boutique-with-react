import{j as e,v as f,$ as v,Y as N}from"./app-CzxKle0n.js";import{A as g}from"./AuthenticatedLayout-2tqRglK4.js";import"./Actif-CW2ogQt8.js";import"./index-BvR7Rk9I.js";function c({label:n,type:t="text",className:s="",...r}){return e.jsxs("div",{className:`form-control ${s}`,children:[e.jsx("label",{className:"label",children:e.jsx("span",{className:"label-text",children:n})}),e.jsx("input",{type:t,className:"input input-bordered w-full",...r}),r.error&&e.jsx("label",{className:"label",children:e.jsx("span",{className:"label-text-alt text-error",children:r.error})})]})}function u({label:n,className:t="",children:s,...r}){return e.jsxs("div",{className:`form-control ${t}`,children:[e.jsx("label",{className:"label",children:e.jsx("span",{className:"label-text",children:n})}),e.jsx("select",{className:"select select-bordered w-full",...r,children:s}),r.error&&e.jsx("label",{className:"label",children:e.jsx("span",{className:"label-text-alt text-error",children:r.error})})]})}function p({label:n,value:t,onChange:s,className:r="",...l}){return e.jsxs("div",{className:`form-control ${r}`,children:[e.jsx("label",{className:"label",children:e.jsx("span",{className:"label-text",children:n})}),e.jsx("input",{type:"date",className:"input input-bordered w-full",value:t,onChange:i=>{i.target.value&&s(i.target.value)},...l}),l.error&&e.jsx("label",{className:"label",children:e.jsx("span",{className:"label-text-alt text-error",children:l.error})})]})}function C({auth:n,depense:t=null,devises:s,modesPaiement:r}){var d;const{data:l,setData:i,post:m,put:x,processing:b,errors:o}=f({montant:(t==null?void 0:t.montant)||"",devise_id:(t==null?void 0:t.devise_id)||((d=s[0])==null?void 0:d.id)||"",description:(t==null?void 0:t.description)||"",mode_paiement:(t==null?void 0:t.mode_paiement)||r[0],beneficiaire:(t==null?void 0:t.beneficiaire)||"",date_depense:t!=null&&t.date_depense?new Date(t.date_depense).toISOString().split("T")[0]:new Date().toISOString().split("T")[0]}),h=a=>{a.preventDefault(),t?x(route("depenses.update",t.id)):m(route("depenses.store"))};return e.jsxs(g,{user:n.user,children:[e.jsx(v,{title:t?"Modifier Dépense":"Nouvelle Dépense"}),e.jsxs("div",{className:"py-6 px-4 sm:px-6 lg:px-8",children:[e.jsxs("div",{className:"flex justify-between items-center mb-6",children:[e.jsx("h1",{className:"text-2xl font-bold",children:t?"Modifier Dépense":"Nouvelle Dépense"}),e.jsx(N,{href:route("depenses.index"),className:"btn btn-ghost",children:"Retour"})]}),e.jsx("div",{className:"bg-base-100 rounded-lg shadow p-6",children:e.jsxs("form",{onSubmit:h,children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsx(c,{label:"Montant",type:"number",step:"0.01",value:l.montant,onChange:a=>i("montant",a.target.value),error:o.montant,required:!0}),e.jsx(u,{label:"Devise",value:l.devise_id,onChange:a=>i("devise_id",a.target.value),error:o.devise_id,required:!0,children:s.map(a=>e.jsxs("option",{value:a.id,children:[a.code," - ",a.nom]},a.id))}),e.jsx("div",{className:"md:col-span-2",children:e.jsx(c,{label:"Description",type:"text",value:l.description,onChange:a=>i("description",a.target.value),error:o.description,required:!0})}),e.jsx(u,{label:"Mode de Paiement",value:l.mode_paiement,onChange:a=>i("mode_paiement",a.target.value),error:o.mode_paiement,required:!0,children:r.map(a=>e.jsx("option",{value:a,children:a.charAt(0).toUpperCase()+a.slice(1)},a))}),e.jsx(c,{label:"Bénéficiaire (optionnel)",type:"text",value:l.beneficiaire,onChange:a=>i("beneficiaire",a.target.value),error:o.beneficiaire}),e.jsx(p,{label:"Date de la Dépense",value:l.date_depense,onChange:a=>{const j=new Date(a).toISOString().split("T")[0];i("date_depense",j)},error:o.date_depense,required:!0})]}),e.jsx("div",{className:"mt-8 flex justify-end",children:e.jsx("button",{type:"submit",className:"btn btn-primary",disabled:b,children:t?"Mettre à jour":"Enregistrer"})})]})})]})]})}export{C as default};
