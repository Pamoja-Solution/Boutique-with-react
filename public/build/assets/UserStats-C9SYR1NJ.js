var Vt=Object.defineProperty;var Qt=(r,t,e)=>t in r?Vt(r,t,{enumerable:!0,configurable:!0,writable:!0,value:e}):r[t]=e;var f=(r,t,e)=>Qt(r,typeof t!="symbol"?t+"":t,e);import{R as Me,r as _e,j as s,$ as Gt,m as Xt}from"./app-VFduLacg.js";import{A as Zt}from"./AuthenticatedLayout-DxrEE8mW.js";import{C as wt,r as Ut,f as Kt}from"./chart-DVLgdDZC.js";import{t as _,e as q,m as xe,g as ge,n as le,h as Jt,i as Ye,j as er,k as tr,s as me,l as bt,o as rr,p as nr,q as yt,r as ar,u as ct,v as sr,w as dt,x as ir,y as or,z as lr,f as cr,A as dr}from"./format-CsCJA4bU.js";import"./Dropdown-BgOAceFK.js";import"./Actif-Dy3nqyPL.js";import"./index-CF3k9Mxl.js";function Te(r,t,e){const n=_(r,e==null?void 0:e.in);return isNaN(t)?q((e==null?void 0:e.in)||r,NaN):(t&&n.setDate(n.getDate()+t),n)}function He(r,t,e){const n=_(r,e==null?void 0:e.in);if(isNaN(t))return q(r,NaN);if(!t)return n;const a=n.getDate(),i=q(r,n.getTime());i.setMonth(n.getMonth()+t+1,0);const o=i.getDate();return a>=o?i:(n.setFullYear(i.getFullYear(),i.getMonth(),a),n)}function qe(r,t,e){return q(r,+_(r)+t)}function ur(r,t,e){return qe(r,t*xe)}function fr(r,t,e){const n=_(r,e==null?void 0:e.in);return n.setTime(n.getTime()+t*ge),n}function hr(r,t,e){return He(r,t*3,e)}function mr(r,t,e){return qe(r,t*1e3)}function pr(r,t,e){return Te(r,t*7,e)}function xr(r,t,e){return He(r,t*12,e)}function fe(r,t){const e=+_(r)-+_(t);return e<0?-1:e>0?1:e}function gr(r,t,e){const[n,a]=le(e==null?void 0:e.in,r,t),i=n.getFullYear()-a.getFullYear(),o=n.getMonth()-a.getMonth();return i*12+o}function wr(r,t,e){const[n,a]=le(e==null?void 0:e.in,r,t);return n.getFullYear()-a.getFullYear()}function vt(r,t,e){const[n,a]=le(e==null?void 0:e.in,r,t),i=ut(n,a),o=Math.abs(Jt(n,a));n.setDate(n.getDate()-i*o);const d=+(ut(n,a)===-i),u=i*(o-d);return u===0?0:u}function ut(r,t){const e=r.getFullYear()-t.getFullYear()||r.getMonth()-t.getMonth()||r.getDate()-t.getDate()||r.getHours()-t.getHours()||r.getMinutes()-t.getMinutes()||r.getSeconds()-t.getSeconds()||r.getMilliseconds()-t.getMilliseconds();return e<0?-1:e>0?1:e}function we(r){return t=>{const n=(r?Math[r]:Math.trunc)(t);return n===0?0:n}}function br(r,t,e){const[n,a]=le(e==null?void 0:e.in,r,t),i=(+n-+a)/xe;return we(e==null?void 0:e.roundingMethod)(i)}function Se(r,t){return+_(r)-+_(t)}function yr(r,t,e){const n=Se(r,t)/ge;return we(e==null?void 0:e.roundingMethod)(n)}function _t(r,t){const e=_(r,t==null?void 0:t.in);return e.setHours(23,59,59,999),e}function Nt(r,t){const e=_(r,t==null?void 0:t.in),n=e.getMonth();return e.setFullYear(e.getFullYear(),n+1,0),e.setHours(23,59,59,999),e}function vr(r,t){const e=_(r,t==null?void 0:t.in);return+_t(e,t)==+Nt(e,t)}function jt(r,t,e){const[n,a,i]=le(e==null?void 0:e.in,r,r,t),o=fe(a,i),d=Math.abs(gr(a,i));if(d<1)return 0;a.getMonth()===1&&a.getDate()>27&&a.setDate(30),a.setMonth(a.getMonth()-o*d);let u=fe(a,i)===-o;vr(n)&&d===1&&fe(n,i)===1&&(u=!1);const l=o*(d-+u);return l===0?0:l}function _r(r,t,e){const n=jt(r,t,e)/3;return we(e==null?void 0:e.roundingMethod)(n)}function Nr(r,t,e){const n=Se(r,t)/1e3;return we(e==null?void 0:e.roundingMethod)(n)}function jr(r,t,e){const n=vt(r,t,e)/7;return we(e==null?void 0:e.roundingMethod)(n)}function Cr(r,t,e){const[n,a]=le(e==null?void 0:e.in,r,t),i=fe(n,a),o=Math.abs(wr(n,a));n.setFullYear(1584),a.setFullYear(1584);const d=fe(n,a)===-i,u=i*(o-+d);return u===0?0:u}function Dr(r,t){const e=_(r,t==null?void 0:t.in),n=e.getMonth(),a=n-n%3;return e.setMonth(a,1),e.setHours(0,0,0,0),e}function Mr(r,t){const e=_(r,t==null?void 0:t.in);return e.setDate(1),e.setHours(0,0,0,0),e}function Or(r,t){const e=_(r,t==null?void 0:t.in),n=e.getFullYear();return e.setFullYear(n+1,0,0),e.setHours(23,59,59,999),e}function Tr(r,t){const e=_(r,t==null?void 0:t.in);return e.setMinutes(59,59,999),e}function kr(r,t){var d,u;const e=Ye(),n=e.weekStartsOn??((u=(d=e.locale)==null?void 0:d.options)==null?void 0:u.weekStartsOn)??0,a=_(r,t==null?void 0:t.in),i=a.getDay(),o=(i<n?-7:0)+6-(i-n);return a.setDate(a.getDate()+o),a.setHours(23,59,59,999),a}function Pr(r,t){const e=_(r,t==null?void 0:t.in);return e.setSeconds(59,999),e}function Fr(r,t){const e=_(r,t==null?void 0:t.in),n=e.getMonth(),a=n-n%3+3;return e.setMonth(a,0),e.setHours(23,59,59,999),e}function Lr(r,t){const e=_(r,t==null?void 0:t.in);return e.setMilliseconds(999),e}function Ar(){return Object.assign({},Ye())}function Er(r,t){const e=_(r,t==null?void 0:t.in).getDay();return e===0?7:e}function Rr(r,t){const e=Ir(t)?new t(0):q(t,0);return e.setFullYear(r.getFullYear(),r.getMonth(),r.getDate()),e.setHours(r.getHours(),r.getMinutes(),r.getSeconds(),r.getMilliseconds()),e}function Ir(r){var t;return typeof r=="function"&&((t=r.prototype)==null?void 0:t.constructor)===r}const Yr=10;class Ct{constructor(){f(this,"subPriority",0)}validate(t,e){return!0}}class Hr extends Ct{constructor(t,e,n,a,i){super(),this.value=t,this.validateValue=e,this.setValue=n,this.priority=a,i&&(this.subPriority=i)}validate(t,e){return this.validateValue(t,this.value,e)}set(t,e,n){return this.setValue(t,e,this.value,n)}}class qr extends Ct{constructor(e,n){super();f(this,"priority",Yr);f(this,"subPriority",-1);this.context=e||(a=>q(n,a))}set(e,n){return n.timestampIsSet?e:q(e,Rr(e,this.context))}}class N{run(t,e,n,a){const i=this.parse(t,e,n,a);return i?{setter:new Hr(i.value,this.validate,this.set,this.priority,this.subPriority),rest:i.rest}:null}validate(t,e,n){return!0}}class Sr extends N{constructor(){super(...arguments);f(this,"priority",140);f(this,"incompatibleTokens",["R","u","t","T"])}parse(e,n,a){switch(n){case"G":case"GG":case"GGG":return a.era(e,{width:"abbreviated"})||a.era(e,{width:"narrow"});case"GGGGG":return a.era(e,{width:"narrow"});case"GGGG":default:return a.era(e,{width:"wide"})||a.era(e,{width:"abbreviated"})||a.era(e,{width:"narrow"})}}set(e,n,a){return n.era=a,e.setFullYear(a,0,1),e.setHours(0,0,0,0),e}}const F={month:/^(1[0-2]|0?\d)/,date:/^(3[0-1]|[0-2]?\d)/,dayOfYear:/^(36[0-6]|3[0-5]\d|[0-2]?\d?\d)/,week:/^(5[0-3]|[0-4]?\d)/,hour23h:/^(2[0-3]|[0-1]?\d)/,hour24h:/^(2[0-4]|[0-1]?\d)/,hour11h:/^(1[0-1]|0?\d)/,hour12h:/^(1[0-2]|0?\d)/,minute:/^[0-5]?\d/,second:/^[0-5]?\d/,singleDigit:/^\d/,twoDigits:/^\d{1,2}/,threeDigits:/^\d{1,3}/,fourDigits:/^\d{1,4}/,anyDigitsSigned:/^-?\d+/,singleDigitSigned:/^-?\d/,twoDigitsSigned:/^-?\d{1,2}/,threeDigitsSigned:/^-?\d{1,3}/,fourDigitsSigned:/^-?\d{1,4}/},W={basicOptionalMinutes:/^([+-])(\d{2})(\d{2})?|Z/,basic:/^([+-])(\d{2})(\d{2})|Z/,basicOptionalSeconds:/^([+-])(\d{2})(\d{2})((\d{2}))?|Z/,extended:/^([+-])(\d{2}):(\d{2})|Z/,extendedOptionalSeconds:/^([+-])(\d{2}):(\d{2})(:(\d{2}))?|Z/};function L(r,t){return r&&{value:t(r.value),rest:r.rest}}function T(r,t){const e=t.match(r);return e?{value:parseInt(e[0],10),rest:t.slice(e[0].length)}:null}function $(r,t){const e=t.match(r);if(!e)return null;if(e[0]==="Z")return{value:0,rest:t.slice(1)};const n=e[1]==="+"?1:-1,a=e[2]?parseInt(e[2],10):0,i=e[3]?parseInt(e[3],10):0,o=e[5]?parseInt(e[5],10):0;return{value:n*(a*xe+i*ge+o*er),rest:t.slice(e[0].length)}}function Dt(r){return T(F.anyDigitsSigned,r)}function P(r,t){switch(r){case 1:return T(F.singleDigit,t);case 2:return T(F.twoDigits,t);case 3:return T(F.threeDigits,t);case 4:return T(F.fourDigits,t);default:return T(new RegExp("^\\d{1,"+r+"}"),t)}}function Oe(r,t){switch(r){case 1:return T(F.singleDigitSigned,t);case 2:return T(F.twoDigitsSigned,t);case 3:return T(F.threeDigitsSigned,t);case 4:return T(F.fourDigitsSigned,t);default:return T(new RegExp("^-?\\d{1,"+r+"}"),t)}}function Be(r){switch(r){case"morning":return 4;case"evening":return 17;case"pm":case"noon":case"afternoon":return 12;case"am":case"midnight":case"night":default:return 0}}function Mt(r,t){const e=t>0,n=e?t:1-t;let a;if(n<=50)a=r||100;else{const i=n+50,o=Math.trunc(i/100)*100,d=r>=i%100;a=r+o-(d?100:0)}return e?a:1-a}function Ot(r){return r%400===0||r%4===0&&r%100!==0}class Br extends N{constructor(){super(...arguments);f(this,"priority",130);f(this,"incompatibleTokens",["Y","R","u","w","I","i","e","c","t","T"])}parse(e,n,a){const i=o=>({year:o,isTwoDigitYear:n==="yy"});switch(n){case"y":return L(P(4,e),i);case"yo":return L(a.ordinalNumber(e,{unit:"year"}),i);default:return L(P(n.length,e),i)}}validate(e,n){return n.isTwoDigitYear||n.year>0}set(e,n,a){const i=e.getFullYear();if(a.isTwoDigitYear){const d=Mt(a.year,i);return e.setFullYear(d,0,1),e.setHours(0,0,0,0),e}const o=!("era"in n)||n.era===1?a.year:1-a.year;return e.setFullYear(o,0,1),e.setHours(0,0,0,0),e}}class zr extends N{constructor(){super(...arguments);f(this,"priority",130);f(this,"incompatibleTokens",["y","R","u","Q","q","M","L","I","d","D","i","t","T"])}parse(e,n,a){const i=o=>({year:o,isTwoDigitYear:n==="YY"});switch(n){case"Y":return L(P(4,e),i);case"Yo":return L(a.ordinalNumber(e,{unit:"year"}),i);default:return L(P(n.length,e),i)}}validate(e,n){return n.isTwoDigitYear||n.year>0}set(e,n,a,i){const o=tr(e,i);if(a.isTwoDigitYear){const u=Mt(a.year,o);return e.setFullYear(u,0,i.firstWeekContainsDate),e.setHours(0,0,0,0),me(e,i)}const d=!("era"in n)||n.era===1?a.year:1-a.year;return e.setFullYear(d,0,i.firstWeekContainsDate),e.setHours(0,0,0,0),me(e,i)}}class Wr extends N{constructor(){super(...arguments);f(this,"priority",130);f(this,"incompatibleTokens",["G","y","Y","u","Q","q","M","L","w","d","D","e","c","t","T"])}parse(e,n){return Oe(n==="R"?4:n.length,e)}set(e,n,a){const i=q(e,0);return i.setFullYear(a,0,4),i.setHours(0,0,0,0),bt(i)}}class $r extends N{constructor(){super(...arguments);f(this,"priority",130);f(this,"incompatibleTokens",["G","y","Y","R","w","I","i","e","c","t","T"])}parse(e,n){return Oe(n==="u"?4:n.length,e)}set(e,n,a){return e.setFullYear(a,0,1),e.setHours(0,0,0,0),e}}class Vr extends N{constructor(){super(...arguments);f(this,"priority",120);f(this,"incompatibleTokens",["Y","R","q","M","L","w","I","d","D","i","e","c","t","T"])}parse(e,n,a){switch(n){case"Q":case"QQ":return P(n.length,e);case"Qo":return a.ordinalNumber(e,{unit:"quarter"});case"QQQ":return a.quarter(e,{width:"abbreviated",context:"formatting"})||a.quarter(e,{width:"narrow",context:"formatting"});case"QQQQQ":return a.quarter(e,{width:"narrow",context:"formatting"});case"QQQQ":default:return a.quarter(e,{width:"wide",context:"formatting"})||a.quarter(e,{width:"abbreviated",context:"formatting"})||a.quarter(e,{width:"narrow",context:"formatting"})}}validate(e,n){return n>=1&&n<=4}set(e,n,a){return e.setMonth((a-1)*3,1),e.setHours(0,0,0,0),e}}class Qr extends N{constructor(){super(...arguments);f(this,"priority",120);f(this,"incompatibleTokens",["Y","R","Q","M","L","w","I","d","D","i","e","c","t","T"])}parse(e,n,a){switch(n){case"q":case"qq":return P(n.length,e);case"qo":return a.ordinalNumber(e,{unit:"quarter"});case"qqq":return a.quarter(e,{width:"abbreviated",context:"standalone"})||a.quarter(e,{width:"narrow",context:"standalone"});case"qqqqq":return a.quarter(e,{width:"narrow",context:"standalone"});case"qqqq":default:return a.quarter(e,{width:"wide",context:"standalone"})||a.quarter(e,{width:"abbreviated",context:"standalone"})||a.quarter(e,{width:"narrow",context:"standalone"})}}validate(e,n){return n>=1&&n<=4}set(e,n,a){return e.setMonth((a-1)*3,1),e.setHours(0,0,0,0),e}}class Gr extends N{constructor(){super(...arguments);f(this,"incompatibleTokens",["Y","R","q","Q","L","w","I","D","i","e","c","t","T"]);f(this,"priority",110)}parse(e,n,a){const i=o=>o-1;switch(n){case"M":return L(T(F.month,e),i);case"MM":return L(P(2,e),i);case"Mo":return L(a.ordinalNumber(e,{unit:"month"}),i);case"MMM":return a.month(e,{width:"abbreviated",context:"formatting"})||a.month(e,{width:"narrow",context:"formatting"});case"MMMMM":return a.month(e,{width:"narrow",context:"formatting"});case"MMMM":default:return a.month(e,{width:"wide",context:"formatting"})||a.month(e,{width:"abbreviated",context:"formatting"})||a.month(e,{width:"narrow",context:"formatting"})}}validate(e,n){return n>=0&&n<=11}set(e,n,a){return e.setMonth(a,1),e.setHours(0,0,0,0),e}}class Xr extends N{constructor(){super(...arguments);f(this,"priority",110);f(this,"incompatibleTokens",["Y","R","q","Q","M","w","I","D","i","e","c","t","T"])}parse(e,n,a){const i=o=>o-1;switch(n){case"L":return L(T(F.month,e),i);case"LL":return L(P(2,e),i);case"Lo":return L(a.ordinalNumber(e,{unit:"month"}),i);case"LLL":return a.month(e,{width:"abbreviated",context:"standalone"})||a.month(e,{width:"narrow",context:"standalone"});case"LLLLL":return a.month(e,{width:"narrow",context:"standalone"});case"LLLL":default:return a.month(e,{width:"wide",context:"standalone"})||a.month(e,{width:"abbreviated",context:"standalone"})||a.month(e,{width:"narrow",context:"standalone"})}}validate(e,n){return n>=0&&n<=11}set(e,n,a){return e.setMonth(a,1),e.setHours(0,0,0,0),e}}function Zr(r,t,e){const n=_(r,e==null?void 0:e.in),a=rr(n,e)-t;return n.setDate(n.getDate()-a*7),_(n,e==null?void 0:e.in)}class Ur extends N{constructor(){super(...arguments);f(this,"priority",100);f(this,"incompatibleTokens",["y","R","u","q","Q","M","L","I","d","D","i","t","T"])}parse(e,n,a){switch(n){case"w":return T(F.week,e);case"wo":return a.ordinalNumber(e,{unit:"week"});default:return P(n.length,e)}}validate(e,n){return n>=1&&n<=53}set(e,n,a,i){return me(Zr(e,a,i),i)}}function Kr(r,t,e){const n=_(r,e==null?void 0:e.in),a=nr(n,e)-t;return n.setDate(n.getDate()-a*7),n}class Jr extends N{constructor(){super(...arguments);f(this,"priority",100);f(this,"incompatibleTokens",["y","Y","u","q","Q","M","L","w","d","D","e","c","t","T"])}parse(e,n,a){switch(n){case"I":return T(F.week,e);case"Io":return a.ordinalNumber(e,{unit:"week"});default:return P(n.length,e)}}validate(e,n){return n>=1&&n<=53}set(e,n,a){return bt(Kr(e,a))}}const en=[31,28,31,30,31,30,31,31,30,31,30,31],tn=[31,29,31,30,31,30,31,31,30,31,30,31];class rn extends N{constructor(){super(...arguments);f(this,"priority",90);f(this,"subPriority",1);f(this,"incompatibleTokens",["Y","R","q","Q","w","I","D","i","e","c","t","T"])}parse(e,n,a){switch(n){case"d":return T(F.date,e);case"do":return a.ordinalNumber(e,{unit:"date"});default:return P(n.length,e)}}validate(e,n){const a=e.getFullYear(),i=Ot(a),o=e.getMonth();return i?n>=1&&n<=tn[o]:n>=1&&n<=en[o]}set(e,n,a){return e.setDate(a),e.setHours(0,0,0,0),e}}class nn extends N{constructor(){super(...arguments);f(this,"priority",90);f(this,"subpriority",1);f(this,"incompatibleTokens",["Y","R","q","Q","M","L","w","I","d","E","i","e","c","t","T"])}parse(e,n,a){switch(n){case"D":case"DD":return T(F.dayOfYear,e);case"Do":return a.ordinalNumber(e,{unit:"date"});default:return P(n.length,e)}}validate(e,n){const a=e.getFullYear();return Ot(a)?n>=1&&n<=366:n>=1&&n<=365}set(e,n,a){return e.setMonth(0,a),e.setHours(0,0,0,0),e}}function ze(r,t,e){var g,p,D,x;const n=Ye(),a=(e==null?void 0:e.weekStartsOn)??((p=(g=e==null?void 0:e.locale)==null?void 0:g.options)==null?void 0:p.weekStartsOn)??n.weekStartsOn??((x=(D=n.locale)==null?void 0:D.options)==null?void 0:x.weekStartsOn)??0,i=_(r,e==null?void 0:e.in),o=i.getDay(),u=(t%7+7)%7,l=7-a,h=t<0||t>6?t-(o+l)%7:(u+l)%7-(o+l)%7;return Te(i,h,e)}class an extends N{constructor(){super(...arguments);f(this,"priority",90);f(this,"incompatibleTokens",["D","i","e","c","t","T"])}parse(e,n,a){switch(n){case"E":case"EE":case"EEE":return a.day(e,{width:"abbreviated",context:"formatting"})||a.day(e,{width:"short",context:"formatting"})||a.day(e,{width:"narrow",context:"formatting"});case"EEEEE":return a.day(e,{width:"narrow",context:"formatting"});case"EEEEEE":return a.day(e,{width:"short",context:"formatting"})||a.day(e,{width:"narrow",context:"formatting"});case"EEEE":default:return a.day(e,{width:"wide",context:"formatting"})||a.day(e,{width:"abbreviated",context:"formatting"})||a.day(e,{width:"short",context:"formatting"})||a.day(e,{width:"narrow",context:"formatting"})}}validate(e,n){return n>=0&&n<=6}set(e,n,a,i){return e=ze(e,a,i),e.setHours(0,0,0,0),e}}class sn extends N{constructor(){super(...arguments);f(this,"priority",90);f(this,"incompatibleTokens",["y","R","u","q","Q","M","L","I","d","D","E","i","c","t","T"])}parse(e,n,a,i){const o=d=>{const u=Math.floor((d-1)/7)*7;return(d+i.weekStartsOn+6)%7+u};switch(n){case"e":case"ee":return L(P(n.length,e),o);case"eo":return L(a.ordinalNumber(e,{unit:"day"}),o);case"eee":return a.day(e,{width:"abbreviated",context:"formatting"})||a.day(e,{width:"short",context:"formatting"})||a.day(e,{width:"narrow",context:"formatting"});case"eeeee":return a.day(e,{width:"narrow",context:"formatting"});case"eeeeee":return a.day(e,{width:"short",context:"formatting"})||a.day(e,{width:"narrow",context:"formatting"});case"eeee":default:return a.day(e,{width:"wide",context:"formatting"})||a.day(e,{width:"abbreviated",context:"formatting"})||a.day(e,{width:"short",context:"formatting"})||a.day(e,{width:"narrow",context:"formatting"})}}validate(e,n){return n>=0&&n<=6}set(e,n,a,i){return e=ze(e,a,i),e.setHours(0,0,0,0),e}}class on extends N{constructor(){super(...arguments);f(this,"priority",90);f(this,"incompatibleTokens",["y","R","u","q","Q","M","L","I","d","D","E","i","e","t","T"])}parse(e,n,a,i){const o=d=>{const u=Math.floor((d-1)/7)*7;return(d+i.weekStartsOn+6)%7+u};switch(n){case"c":case"cc":return L(P(n.length,e),o);case"co":return L(a.ordinalNumber(e,{unit:"day"}),o);case"ccc":return a.day(e,{width:"abbreviated",context:"standalone"})||a.day(e,{width:"short",context:"standalone"})||a.day(e,{width:"narrow",context:"standalone"});case"ccccc":return a.day(e,{width:"narrow",context:"standalone"});case"cccccc":return a.day(e,{width:"short",context:"standalone"})||a.day(e,{width:"narrow",context:"standalone"});case"cccc":default:return a.day(e,{width:"wide",context:"standalone"})||a.day(e,{width:"abbreviated",context:"standalone"})||a.day(e,{width:"short",context:"standalone"})||a.day(e,{width:"narrow",context:"standalone"})}}validate(e,n){return n>=0&&n<=6}set(e,n,a,i){return e=ze(e,a,i),e.setHours(0,0,0,0),e}}function ln(r,t,e){const n=_(r,e==null?void 0:e.in),a=Er(n,e),i=t-a;return Te(n,i,e)}class cn extends N{constructor(){super(...arguments);f(this,"priority",90);f(this,"incompatibleTokens",["y","Y","u","q","Q","M","L","w","d","D","E","e","c","t","T"])}parse(e,n,a){const i=o=>o===0?7:o;switch(n){case"i":case"ii":return P(n.length,e);case"io":return a.ordinalNumber(e,{unit:"day"});case"iii":return L(a.day(e,{width:"abbreviated",context:"formatting"})||a.day(e,{width:"short",context:"formatting"})||a.day(e,{width:"narrow",context:"formatting"}),i);case"iiiii":return L(a.day(e,{width:"narrow",context:"formatting"}),i);case"iiiiii":return L(a.day(e,{width:"short",context:"formatting"})||a.day(e,{width:"narrow",context:"formatting"}),i);case"iiii":default:return L(a.day(e,{width:"wide",context:"formatting"})||a.day(e,{width:"abbreviated",context:"formatting"})||a.day(e,{width:"short",context:"formatting"})||a.day(e,{width:"narrow",context:"formatting"}),i)}}validate(e,n){return n>=1&&n<=7}set(e,n,a){return e=ln(e,a),e.setHours(0,0,0,0),e}}class dn extends N{constructor(){super(...arguments);f(this,"priority",80);f(this,"incompatibleTokens",["b","B","H","k","t","T"])}parse(e,n,a){switch(n){case"a":case"aa":case"aaa":return a.dayPeriod(e,{width:"abbreviated",context:"formatting"})||a.dayPeriod(e,{width:"narrow",context:"formatting"});case"aaaaa":return a.dayPeriod(e,{width:"narrow",context:"formatting"});case"aaaa":default:return a.dayPeriod(e,{width:"wide",context:"formatting"})||a.dayPeriod(e,{width:"abbreviated",context:"formatting"})||a.dayPeriod(e,{width:"narrow",context:"formatting"})}}set(e,n,a){return e.setHours(Be(a),0,0,0),e}}class un extends N{constructor(){super(...arguments);f(this,"priority",80);f(this,"incompatibleTokens",["a","B","H","k","t","T"])}parse(e,n,a){switch(n){case"b":case"bb":case"bbb":return a.dayPeriod(e,{width:"abbreviated",context:"formatting"})||a.dayPeriod(e,{width:"narrow",context:"formatting"});case"bbbbb":return a.dayPeriod(e,{width:"narrow",context:"formatting"});case"bbbb":default:return a.dayPeriod(e,{width:"wide",context:"formatting"})||a.dayPeriod(e,{width:"abbreviated",context:"formatting"})||a.dayPeriod(e,{width:"narrow",context:"formatting"})}}set(e,n,a){return e.setHours(Be(a),0,0,0),e}}class fn extends N{constructor(){super(...arguments);f(this,"priority",80);f(this,"incompatibleTokens",["a","b","t","T"])}parse(e,n,a){switch(n){case"B":case"BB":case"BBB":return a.dayPeriod(e,{width:"abbreviated",context:"formatting"})||a.dayPeriod(e,{width:"narrow",context:"formatting"});case"BBBBB":return a.dayPeriod(e,{width:"narrow",context:"formatting"});case"BBBB":default:return a.dayPeriod(e,{width:"wide",context:"formatting"})||a.dayPeriod(e,{width:"abbreviated",context:"formatting"})||a.dayPeriod(e,{width:"narrow",context:"formatting"})}}set(e,n,a){return e.setHours(Be(a),0,0,0),e}}class hn extends N{constructor(){super(...arguments);f(this,"priority",70);f(this,"incompatibleTokens",["H","K","k","t","T"])}parse(e,n,a){switch(n){case"h":return T(F.hour12h,e);case"ho":return a.ordinalNumber(e,{unit:"hour"});default:return P(n.length,e)}}validate(e,n){return n>=1&&n<=12}set(e,n,a){const i=e.getHours()>=12;return i&&a<12?e.setHours(a+12,0,0,0):!i&&a===12?e.setHours(0,0,0,0):e.setHours(a,0,0,0),e}}class mn extends N{constructor(){super(...arguments);f(this,"priority",70);f(this,"incompatibleTokens",["a","b","h","K","k","t","T"])}parse(e,n,a){switch(n){case"H":return T(F.hour23h,e);case"Ho":return a.ordinalNumber(e,{unit:"hour"});default:return P(n.length,e)}}validate(e,n){return n>=0&&n<=23}set(e,n,a){return e.setHours(a,0,0,0),e}}class pn extends N{constructor(){super(...arguments);f(this,"priority",70);f(this,"incompatibleTokens",["h","H","k","t","T"])}parse(e,n,a){switch(n){case"K":return T(F.hour11h,e);case"Ko":return a.ordinalNumber(e,{unit:"hour"});default:return P(n.length,e)}}validate(e,n){return n>=0&&n<=11}set(e,n,a){return e.getHours()>=12&&a<12?e.setHours(a+12,0,0,0):e.setHours(a,0,0,0),e}}class xn extends N{constructor(){super(...arguments);f(this,"priority",70);f(this,"incompatibleTokens",["a","b","h","H","K","t","T"])}parse(e,n,a){switch(n){case"k":return T(F.hour24h,e);case"ko":return a.ordinalNumber(e,{unit:"hour"});default:return P(n.length,e)}}validate(e,n){return n>=1&&n<=24}set(e,n,a){const i=a<=24?a%24:a;return e.setHours(i,0,0,0),e}}class gn extends N{constructor(){super(...arguments);f(this,"priority",60);f(this,"incompatibleTokens",["t","T"])}parse(e,n,a){switch(n){case"m":return T(F.minute,e);case"mo":return a.ordinalNumber(e,{unit:"minute"});default:return P(n.length,e)}}validate(e,n){return n>=0&&n<=59}set(e,n,a){return e.setMinutes(a,0,0),e}}class wn extends N{constructor(){super(...arguments);f(this,"priority",50);f(this,"incompatibleTokens",["t","T"])}parse(e,n,a){switch(n){case"s":return T(F.second,e);case"so":return a.ordinalNumber(e,{unit:"second"});default:return P(n.length,e)}}validate(e,n){return n>=0&&n<=59}set(e,n,a){return e.setSeconds(a,0),e}}class bn extends N{constructor(){super(...arguments);f(this,"priority",30);f(this,"incompatibleTokens",["t","T"])}parse(e,n){const a=i=>Math.trunc(i*Math.pow(10,-n.length+3));return L(P(n.length,e),a)}set(e,n,a){return e.setMilliseconds(a),e}}class yn extends N{constructor(){super(...arguments);f(this,"priority",10);f(this,"incompatibleTokens",["t","T","x"])}parse(e,n){switch(n){case"X":return $(W.basicOptionalMinutes,e);case"XX":return $(W.basic,e);case"XXXX":return $(W.basicOptionalSeconds,e);case"XXXXX":return $(W.extendedOptionalSeconds,e);case"XXX":default:return $(W.extended,e)}}set(e,n,a){return n.timestampIsSet?e:q(e,e.getTime()-yt(e)-a)}}class vn extends N{constructor(){super(...arguments);f(this,"priority",10);f(this,"incompatibleTokens",["t","T","X"])}parse(e,n){switch(n){case"x":return $(W.basicOptionalMinutes,e);case"xx":return $(W.basic,e);case"xxxx":return $(W.basicOptionalSeconds,e);case"xxxxx":return $(W.extendedOptionalSeconds,e);case"xxx":default:return $(W.extended,e)}}set(e,n,a){return n.timestampIsSet?e:q(e,e.getTime()-yt(e)-a)}}class _n extends N{constructor(){super(...arguments);f(this,"priority",40);f(this,"incompatibleTokens","*")}parse(e){return Dt(e)}set(e,n,a){return[q(e,a*1e3),{timestampIsSet:!0}]}}class Nn extends N{constructor(){super(...arguments);f(this,"priority",20);f(this,"incompatibleTokens","*")}parse(e){return Dt(e)}set(e,n,a){return[q(e,a),{timestampIsSet:!0}]}}const jn={G:new Sr,y:new Br,Y:new zr,R:new Wr,u:new $r,Q:new Vr,q:new Qr,M:new Gr,L:new Xr,w:new Ur,I:new Jr,d:new rn,D:new nn,E:new an,e:new sn,c:new on,i:new cn,a:new dn,b:new un,B:new fn,h:new hn,H:new mn,K:new pn,k:new xn,m:new gn,s:new wn,S:new bn,X:new yn,x:new vn,t:new _n,T:new Nn},Cn=/[yYQqMLwIdDecihHKkms]o|(\w)\1*|''|'(''|[^'])+('|$)|./g,Dn=/P+p+|P+|p+|''|'(''|[^'])+('|$)|./g,Mn=/^'([^]*?)'?$/,On=/''/g,Tn=/\S/,kn=/[a-zA-Z]/;function Pn(r,t,e,n){var E,Y,M,I,R,G,X,Z;const a=()=>q((n==null?void 0:n.in)||e,NaN),i=Ar(),o=(n==null?void 0:n.locale)??i.locale??ar,d=(n==null?void 0:n.firstWeekContainsDate)??((Y=(E=n==null?void 0:n.locale)==null?void 0:E.options)==null?void 0:Y.firstWeekContainsDate)??i.firstWeekContainsDate??((I=(M=i.locale)==null?void 0:M.options)==null?void 0:I.firstWeekContainsDate)??1,u=(n==null?void 0:n.weekStartsOn)??((G=(R=n==null?void 0:n.locale)==null?void 0:R.options)==null?void 0:G.weekStartsOn)??i.weekStartsOn??((Z=(X=i.locale)==null?void 0:X.options)==null?void 0:Z.weekStartsOn)??0;if(!t)return r?a():_(e,n==null?void 0:n.in);const l={firstWeekContainsDate:d,weekStartsOn:u,locale:o},h=[new qr(n==null?void 0:n.in,e)],g=t.match(Dn).map(w=>{const y=w[0];if(y in ct){const O=ct[y];return O(w,o.formatLong)}return w}).join("").match(Cn),p=[];for(let w of g){!(n!=null&&n.useAdditionalWeekYearTokens)&&sr(w)&&dt(w,t,r),!(n!=null&&n.useAdditionalDayOfYearTokens)&&ir(w)&&dt(w,t,r);const y=w[0],O=jn[y];if(O){const{incompatibleTokens:ae}=O;if(Array.isArray(ae)){const c=p.find(m=>ae.includes(m.token)||m.token===y);if(c)throw new RangeError(`The format string mustn't contain \`${c.fullToken}\` and \`${w}\` at the same time`)}else if(O.incompatibleTokens==="*"&&p.length>0)throw new RangeError(`The format string mustn't contain \`${w}\` and any other token at the same time`);p.push({token:y,fullToken:w});const U=O.run(r,w,o.match,l);if(!U)return a();h.push(U.setter),r=U.rest}else{if(y.match(kn))throw new RangeError("Format string contains an unescaped latin alphabet character `"+y+"`");if(w==="''"?w="'":y==="'"&&(w=Fn(w)),r.indexOf(w)===0)r=r.slice(w.length);else return a()}}if(r.length>0&&Tn.test(r))return a();const D=h.map(w=>w.priority).sort((w,y)=>y-w).filter((w,y,O)=>O.indexOf(w)===y).map(w=>h.filter(y=>y.priority===w).sort((y,O)=>O.subPriority-y.subPriority)).map(w=>w[0]);let x=_(e,n==null?void 0:n.in);if(isNaN(+x))return a();const j={};for(const w of D){if(!w.validate(x,l))return a();const y=w.set(x,j,l);Array.isArray(y)?(x=y[0],Object.assign(j,y[1])):x=y}return x}function Fn(r){return r.match(Mn)[1].replace(On,"'")}function Ln(r,t){const e=_(r,t==null?void 0:t.in);return e.setMinutes(0,0,0),e}function An(r,t){const e=_(r,t==null?void 0:t.in);return e.setSeconds(0,0),e}function En(r,t){const e=_(r,t==null?void 0:t.in);return e.setMilliseconds(0),e}function Rn(r,t){const e=()=>q(t==null?void 0:t.in,NaN),n=(t==null?void 0:t.additionalDigits)??2,a=qn(r);let i;if(a.date){const l=Sn(a.date,n);i=Bn(l.restDateString,l.year)}if(!i||isNaN(+i))return e();const o=+i;let d=0,u;if(a.time&&(d=zn(a.time),isNaN(d)))return e();if(a.timezone){if(u=Wn(a.timezone),isNaN(u))return e()}else{const l=new Date(o+d),h=_(0,t==null?void 0:t.in);return h.setFullYear(l.getUTCFullYear(),l.getUTCMonth(),l.getUTCDate()),h.setHours(l.getUTCHours(),l.getUTCMinutes(),l.getUTCSeconds(),l.getUTCMilliseconds()),h}return _(o+d+u,t==null?void 0:t.in)}const Ne={dateTimeDelimiter:/[T ]/,timeZoneDelimiter:/[Z ]/i,timezone:/([Z+-].*)$/},In=/^-?(?:(\d{3})|(\d{2})(?:-?(\d{2}))?|W(\d{2})(?:-?(\d{1}))?|)$/,Yn=/^(\d{2}(?:[.,]\d*)?)(?::?(\d{2}(?:[.,]\d*)?))?(?::?(\d{2}(?:[.,]\d*)?))?$/,Hn=/^([+-])(\d{2})(?::?(\d{2}))?$/;function qn(r){const t={},e=r.split(Ne.dateTimeDelimiter);let n;if(e.length>2)return t;if(/:/.test(e[0])?n=e[0]:(t.date=e[0],n=e[1],Ne.timeZoneDelimiter.test(t.date)&&(t.date=r.split(Ne.timeZoneDelimiter)[0],n=r.substr(t.date.length,r.length))),n){const a=Ne.timezone.exec(n);a?(t.time=n.replace(a[1],""),t.timezone=a[1]):t.time=n}return t}function Sn(r,t){const e=new RegExp("^(?:(\\d{4}|[+-]\\d{"+(4+t)+"})|(\\d{2}|[+-]\\d{"+(2+t)+"})$)"),n=r.match(e);if(!n)return{year:NaN,restDateString:""};const a=n[1]?parseInt(n[1]):null,i=n[2]?parseInt(n[2]):null;return{year:i===null?a:i*100,restDateString:r.slice((n[1]||n[2]).length)}}function Bn(r,t){if(t===null)return new Date(NaN);const e=r.match(In);if(!e)return new Date(NaN);const n=!!e[4],a=ue(e[1]),i=ue(e[2])-1,o=ue(e[3]),d=ue(e[4]),u=ue(e[5])-1;if(n)return Xn(t,d,u)?$n(t,d,u):new Date(NaN);{const l=new Date(0);return!Qn(t,i,o)||!Gn(t,a)?new Date(NaN):(l.setUTCFullYear(t,i,Math.max(a,o)),l)}}function ue(r){return r?parseInt(r):1}function zn(r){const t=r.match(Yn);if(!t)return NaN;const e=Le(t[1]),n=Le(t[2]),a=Le(t[3]);return Zn(e,n,a)?e*xe+n*ge+a*1e3:NaN}function Le(r){return r&&parseFloat(r.replace(",","."))||0}function Wn(r){if(r==="Z")return 0;const t=r.match(Hn);if(!t)return 0;const e=t[1]==="+"?-1:1,n=parseInt(t[2]),a=t[3]&&parseInt(t[3])||0;return Un(n,a)?e*(n*xe+a*ge):NaN}function $n(r,t,e){const n=new Date(0);n.setUTCFullYear(r,0,4);const a=n.getUTCDay()||7,i=(t-1)*7+e+1-a;return n.setUTCDate(n.getUTCDate()+i),n}const Vn=[31,null,31,30,31,30,31,31,30,31,30,31];function Tt(r){return r%400===0||r%4===0&&r%100!==0}function Qn(r,t,e){return t>=0&&t<=11&&e>=1&&e<=(Vn[t]||(Tt(r)?29:28))}function Gn(r,t){return t>=1&&t<=(Tt(r)?366:365)}function Xn(r,t,e){return t>=1&&t<=53&&e>=0&&e<=6}function Zn(r,t,e){return r===24?t===0&&e===0:e>=0&&e<60&&t>=0&&t<60&&r>=0&&r<25}function Un(r,t){return t>=0&&t<=59}/*!
 * Chartkick.js v5.0.1
 * Create beautiful charts with one line of JavaScript
 * https://github.com/ankane/chartkick.js
 * MIT License
 */function re(r){return Object.prototype.toString.call(r)==="[object Array]"}function We(r){return r instanceof Function}function je(r){return Object.prototype.toString.call(r)==="[object Object]"&&!We(r)&&r instanceof Object}function Re(r,t){for(var e in t)e!=="__proto__"&&(je(t[e])||re(t[e])?(je(t[e])&&!je(r[e])&&(r[e]={}),re(t[e])&&!re(r[e])&&(r[e]=[]),Re(r[e],t[e])):t[e]!==void 0&&(r[e]=t[e]))}function k(r,t){var e={};return Re(e,r),Re(e,t),e}var Kn=/^(\d\d\d\d)(?:-)?(\d\d)(?:-)?(\d\d)$/i;function Jn(r){for(var t=0;t<r.length;t++)for(var e=r[t].data,n=0;n<e.length;n++)if(e[n][1]<0)return!0;return!1}function J(r){return""+r}function V(r){return parseFloat(r)}function z(r){if(r instanceof Date)return r;if(typeof r=="number")return new Date(r*1e3);var t=J(r),e=t.match(Kn);if(e){var n=parseInt(e[1],10),a=parseInt(e[2],10)-1,i=parseInt(e[3],10);return new Date(n,a,i)}else{var o=t.replace(/ /,"T").replace(" ","").replace("UTC","Z");return new Date(Date.parse(o)||t)}}function $e(r){if(re(r))return r;var t=[];for(var e in r)Object.prototype.hasOwnProperty.call(r,e)&&t.push([e,r[e]]);return t}function be(r,t,e,n,a,i,o,d){return function(u,l,h){var g=u.data,p=k({},r);return p=k(p,h||{}),(u.singleSeriesFormat||"legend"in l)&&t(p,l.legend,u.singleSeriesFormat),l.title&&e(p,l.title),"min"in l?n(p,l.min):Jn(g)||n(p,0),l.max&&a(p,l.max),"stacked"in l&&i(p,l.stacked),l.colors&&(p.colors=l.colors),l.xtitle&&o(p,l.xtitle),l.ytitle&&d(p,l.ytitle),p=k(p,l.library||{}),p}}function ea(r,t){return r[0].getTime()-t[0].getTime()}function Ve(r,t){return r[0]-t[0]}function kt(r,t){return r-t}function oe(r,t){for(var e=0;e<r.length;e++)if(!t(r[e]))return!1;return!0}function ta(r){return r==="day"||r==="week"||r==="month"||r==="year"}function Pt(r,t){if(t===void 0&&(t=!1),r.length===0)return null;var e=oe(r,function(l){return l.getMilliseconds()===0&&l.getSeconds()===0});if(!e)return null;var n=oe(r,function(l){return l.getMinutes()===0});if(!n)return"minute";var a=oe(r,function(l){return l.getHours()===0});if(!a)return"hour";if(t)return"day";var i=oe(r,function(l){return l.getDate()===1});if(!i){var o=r[0].getDay(),d=oe(r,function(l){return l.getDay()===o});return d?"week":"day"}var u=oe(r,function(l){return l.getMonth()===0});return u?"year":"month"}function Ae(r){return!isNaN(z(r))&&J(r).length>=6}function ra(r){return typeof r=="number"}var ft=["bytes","KB","MB","GB","TB","PB","EB"];function B(r,t,e,n){r=r||"",e.prefix&&(t<0&&(t=t*-1,r+="-"),r+=e.prefix);var a=e.suffix||"",i=e.precision,o=e.round;if(e.byteScale){var d=t>=0;d||(t*=-1);var u=n?e.byteScale:t,l;u>=1152921504606847e3?(t/=1152921504606847e3,l=6):u>=0x4000000000000?(t/=0x4000000000000,l=5):u>=1099511627776?(t/=1099511627776,l=4):u>=1073741824?(t/=1073741824,l=3):u>=1048576?(t/=1048576,l=2):u>=1024?(t/=1024,l=1):l=0,i===void 0&&o===void 0&&(t>=1023.5&&l<ft.length-1&&(t=1,l+=1),i=t>=1e3?4:3),a=" "+ft[l],d||(t*=-1)}if(i!==void 0&&o!==void 0)throw Error("Use either round or precision, not both");if(!n&&(i!==void 0&&(t=t.toPrecision(i),e.zeros||(t=parseFloat(t))),o!==void 0))if(o<0){var h=Math.pow(10,-1*o);t=parseInt((1*t/h).toFixed(0))*h}else t=t.toFixed(o),e.zeros||(t=parseFloat(t));if(e.thousands||e.decimal){t=J(t);var g=t.split(".");t=g[0],e.thousands&&(t=t.replace(/\B(?=(\d{3})+(?!\d))/g,e.thousands)),g.length>1&&(t+=(e.decimal||".")+g[1])}return r+t+a}function ht(r,t,e){return e in t?t[e]:e in r.options?r.options[e]:null}var Qe={maintainAspectRatio:!1,animation:!1,plugins:{legend:{},tooltip:{displayColors:!1,callbacks:{}},title:{font:{size:20},color:"#333"}},interaction:{}},Ft={scales:{y:{ticks:{maxTicksLimit:4},title:{font:{size:16},color:"#333"},grid:{}},x:{grid:{drawOnChartArea:!1},title:{font:{size:16},color:"#333"},time:{},ticks:{}}}},Lt=["#3366CC","#DC3912","#FF9900","#109618","#990099","#3B3EAC","#0099C6","#DD4477","#66AA00","#B82E2E","#316395","#994499","#22AA99","#AAAA11","#6633CC","#E67300","#8B0707","#329262","#5574A6","#651067"];function Ge(r,t,e){t!==void 0?(r.plugins.legend.display=!!t,t&&t!==!0&&(r.plugins.legend.position=t)):e&&(r.plugins.legend.display=!1)}function Xe(r,t){r.plugins.title.display=!0,r.plugins.title.text=t}function na(r,t){t!==null&&(r.scales.y.min=V(t))}function aa(r,t){r.scales.y.max=V(t)}function sa(r,t){t!==null&&(r.scales.x.min=V(t))}function ia(r,t){r.scales.x.max=V(t)}function At(r,t){r.scales.x.stacked=!!t,r.scales.y.stacked=!!t}function Et(r,t){r.scales.x.title.display=!0,r.scales.x.title.text=t}function Rt(r,t){r.scales.y.title.display=!0,r.scales.y.title.text=t}function mt(r,t){var e=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(r);return e?"rgba("+parseInt(e[1],16)+", "+parseInt(e[2],16)+", "+parseInt(e[3],16)+", "+t+")":r}function te(r){return r!=null}function oa(r,t,e){var n=Math.ceil(r.element.offsetWidth/4/t.labels.length);n>25?n=25:n<10&&(n=10),e.scales.x.ticks.callback||(e.scales.x.ticks.callback=function(a){return a=J(this.getLabelForValue(a)),a.length>n?a.substring(0,n-2)+"...":a})}function la(r){for(var t=1,e=ca(r);e>=1024;)t*=1024,e/=1024;return t}function ke(r,t,e){var n={thousands:r.options.thousands,decimal:r.options.decimal},a=k({prefix:r.options.prefix,suffix:r.options.suffix,precision:r.options.precision,round:r.options.round,zeros:r.options.zeros},n);if(r.options.bytes){var i=r.data;e==="pie"&&(i=[{data:i}]),a.byteScale=la(i)}if(e!=="pie"){var o=t.scales.y;e==="bar"&&(o=t.scales.x),a.byteScale&&(o.ticks.stepSize||(o.ticks.stepSize=a.byteScale/2),o.ticks.maxTicksLimit||(o.ticks.maxTicksLimit=4)),o.ticks.callback||(o.ticks.callback=function(u){return B("",u,a,!0)}),(e==="scatter"||e==="bubble")&&!t.scales.x.ticks.callback&&(t.scales.x.ticks.callback=function(u){return B("",u,n,!0)})}if(!t.plugins.tooltip.callbacks.label)if(e==="scatter")t.plugins.tooltip.callbacks.label=function(u){var l=u.dataset.label||"";l&&(l+=": ");var h=u.parsed;return l+"("+B("",h.x,n)+", "+B("",h.y,a)+")"};else if(e==="bubble")t.plugins.tooltip.callbacks.label=function(u){var l=u.dataset.label||"";l&&(l+=": ");var h=u.raw;return l+"("+B("",h.x,n)+", "+B("",h.y,a)+", "+B("",h.v,n)+")"};else if(e==="pie")t.plugins.tooltip.callbacks.label=function(u){return B("",u.parsed,a)};else{var d=e==="bar"?"x":"y";t.plugins.tooltip.callbacks.label=function(u){if(u.parsed[d]!==null){var l=u.dataset.label||"";return l&&(l+=": "),B(l,u.parsed[d],a)}}}(e==="line"||e==="area")&&r.xtype==="number"&&(t.scales.x.ticks.callback||(t.scales.x.ticks.callback=function(u){return J(u)}),t.plugins.tooltip.callbacks.title||(t.plugins.tooltip.callbacks.title=function(u){return J(u[0].parsed.x)}))}function ca(r){for(var t=0,e=0;e<r.length;e++)for(var n=r[e].data,a=0;a<n.length;a++){var i=Math.abs(n[a][1]);i>t&&(t=i)}return t}function da(r){for(var t=0,e=0;e<r.length;e++)for(var n=r[e].data,a=0;a<n.length;a++){var i=n[a][2];i>t&&(t=i)}return t}var Ze=be(k(Qe,Ft),Ge,Xe,na,aa,At,Et,Rt);function ua(r){for(var t=r.data,e={},n=[],a=[],i=[],o=0;o<t.length;o++)for(var d=t[o].data,u=0;u<d.length;u++){var l=d[u],h=r.xtype==="datetime"?l[0].getTime():l[0];e[h]||(e[h]=new Array(t.length),n.push(h)),e[h][o]=l[1]}(r.xtype==="datetime"||r.xtype==="number")&&n.sort(kt);for(var g=0;g<t.length;g++)i.push([]);for(var p=0;p<n.length;p++){var D=n[p],x=r.xtype==="datetime"?new Date(D):D;a.push(x);for(var j=e[D],E=0;E<t.length;E++){var Y=j[E];i[E].push(Y===void 0?null:Y)}}return{labels:a,values:i}}function fa(r){for(var t=r.data,e=[],n=da(t),a=0;a<t.length;a++){for(var i=t[a].data,o=[],d=0;d<i.length;d++){var u=i[d];o.push({x:u[0],y:u[1],r:u[2]*20/n,v:u[2]})}e.push(o)}return{labels:[],values:e}}function ha(r){for(var t=r.data,e=[],n=0;n<t.length;n++){var a=t[n].data;a.sort(Ve);for(var i=[],o=0;o<a.length;o++){var d=a[o];i.push({x:d[0],y:d[1]})}e.push(i)}return{labels:[],values:e}}function ma(r,t){return t==="bubble"?fa(r):r.xtype==="number"&&t!=="bar"&&t!=="column"?ha(r):ua(r)}function Ue(r,t,e){for(var n=ma(r,e),a=n.labels,i=n.values,o=r.data,d=[],u=r.options.colors||Lt,l=0;l<o.length;l++){var h=o[l],g=void 0,p=void 0;if(r.options.colors&&r.singleSeriesFormat&&(e==="bar"||e==="column")&&!h.color&&re(r.options.colors)&&!re(r.options.colors[0])){g=u,p=[];for(var D=0;D<u.length;D++)p[D]=mt(g[D],.5)}else g=h.color||u[l],p=e!=="line"?mt(g,.5):g;var x={label:h.name||"",data:i[l],fill:e==="area",borderColor:g,backgroundColor:p,borderWidth:2},j=e==="line"||e==="area"||e==="scatter"||e==="bubble";j&&(x.pointBackgroundColor=g,x.pointHoverBackgroundColor=g,x.pointHitRadius=50),e==="bubble"&&(x.pointBackgroundColor=p,x.pointHoverBackgroundColor=p,x.pointHoverBorderWidth=2),h.stack&&(x.stack=h.stack);var E=ht(r,h,"curve");E===!1?x.tension=0:j&&(x.tension=.4);var Y=ht(r,h,"points");Y===!1&&(x.pointRadius=0,x.pointHoverRadius=0),x=k(x,r.options.dataset||{}),x=k(x,h.library||{}),x=k(x,h.dataset||{}),d.push(x)}var M=r.options.xmin,I=r.options.xmax;if(r.xtype==="datetime"?(te(M)&&(t.scales.x.min=z(M).getTime()),te(I)&&(t.scales.x.max=z(I).getTime())):r.xtype==="number"&&(te(M)&&(t.scales.x.min=M),te(I)&&(t.scales.x.max=I)),r.xtype==="datetime"){var R=Pt(a);if(a.length===0&&(te(M)&&a.push(z(M)),te(I)&&a.push(z(I))),a.length>0){for(var G=(te(M)?z(M):a[0]).getTime(),X=(te(I)?z(I):a[0]).getTime(),Z=1;Z<a.length;Z++){var w=a[Z].getTime();w<G&&(G=w),w>X&&(X=w)}var y=(X-G)/(86400*1e3);if(!t.scales.x.time.unit){var O;if(R==="year"||y>365*10?(t.scales.x.time.unit="year",O=365):R==="month"||y>30*10?(t.scales.x.time.unit="month",O=30):R==="week"||R==="day"||y>10?(t.scales.x.time.unit="day",O=1):R==="hour"||y>.5?(t.scales.x.time.displayFormats={hour:"MMM d, h a"},t.scales.x.time.unit="hour",O=1/24):R==="minute"&&(t.scales.x.time.displayFormats={minute:"h:mm a"},t.scales.x.time.unit="minute",O=1/24/60),O&&y>0){var ae=r.element.offsetWidth;if(ae>0){var U=Math.ceil(y/O/(ae/100));R==="week"&&O===1&&(U=Math.ceil(U/7)*7),t.scales.x.ticks.stepSize=U}}}t.scales.x.time.tooltipFormat||(R==="year"?t.scales.x.time.tooltipFormat="yyyy":R==="month"?t.scales.x.time.tooltipFormat="MMM yyyy":R==="week"||R==="day"?t.scales.x.time.tooltipFormat="PP":R==="hour"?t.scales.x.time.tooltipFormat="MMM d, h a":R==="minute"&&(t.scales.x.time.tooltipFormat="h:mm a"))}}return{labels:a,datasets:d}}var Q=function(t){this.name="chartjs",this.library=t};Q.prototype.renderLineChart=function(t,e){e||(e="line");var n={},a=Ze(t,k(n,t.options));ke(t,a,e);var i=Ue(t,a,e);t.xtype==="number"?(a.scales.x.type=a.scales.x.type||"linear",a.scales.x.position=a.scales.x.position||"bottom"):a.scales.x.type=t.xtype==="string"?"category":"time",this.drawChart(t,"line",i,a)};Q.prototype.renderPieChart=function(t){var e=k({},Qe);t.options.donut&&(e.cutout="50%"),"legend"in t.options&&Ge(e,t.options.legend),t.options.title&&Xe(e,t.options.title),e=k(e,t.options.library||{}),ke(t,e,"pie");for(var n=[],a=[],i=0;i<t.data.length;i++){var o=t.data[i];n.push(o[0]),a.push(o[1])}var d={data:a,backgroundColor:t.options.colors||Lt};d=k(d,t.options.dataset||{});var u={labels:n,datasets:[d]};this.drawChart(t,"pie",u,e)};Q.prototype.renderColumnChart=function(t,e){var n;if(e==="bar"){var a=k(Qe,Ft);a.indexAxis="y",a.scales.x.grid.drawOnChartArea=!0,a.scales.y.grid.drawOnChartArea=!1,delete a.scales.y.ticks.maxTicksLimit,n=be(a,Ge,Xe,sa,ia,At,Et,Rt)(t,t.options)}else n=Ze(t,t.options);ke(t,n,e);var i=Ue(t,n,"column");e!=="bar"&&oa(t,i,n),"mode"in n.interaction||(n.interaction.mode="index"),this.drawChart(t,"bar",i,n)};Q.prototype.renderAreaChart=function(t){this.renderLineChart(t,"area")};Q.prototype.renderBarChart=function(t){this.renderColumnChart(t,"bar")};Q.prototype.renderScatterChart=function(t,e){e=e||"scatter";var n=Ze(t,t.options);ke(t,n,e),"showLine"in n||(n.showLine=!1);var a=Ue(t,n,e);n.scales.x.type=n.scales.x.type||"linear",n.scales.x.position=n.scales.x.position||"bottom","mode"in n.interaction||(n.interaction.mode="nearest"),this.drawChart(t,e,a,n)};Q.prototype.renderBubbleChart=function(t){this.renderScatterChart(t,"bubble")};Q.prototype.destroy=function(t){t.chart&&t.chart.destroy()};Q.prototype.drawChart=function(t,e,n,a){if(this.destroy(t),!t.destroyed){var i={type:e,data:n,options:a};t.options.code&&window.console.log("new Chart(ctx, "+JSON.stringify(i)+");"),t.element.innerHTML="<canvas></canvas>";var o=t.element.getElementsByTagName("CANVAS")[0];t.chart=new this.library(o,i)}};var It={chart:{},xAxis:{title:{text:null},labels:{style:{fontSize:"12px"}}},yAxis:{title:{text:null},labels:{style:{fontSize:"12px"}}},title:{text:null},credits:{enabled:!1},legend:{borderWidth:0},tooltip:{style:{fontSize:"12px"}},plotOptions:{areaspline:{},area:{},series:{marker:{}}},time:{useUTC:!1}};function Yt(r,t,e){t!==void 0?(r.legend.enabled=!!t,t&&t!==!0&&(t==="top"||t==="bottom"?r.legend.verticalAlign=t:(r.legend.layout="vertical",r.legend.verticalAlign="middle",r.legend.align=t))):e&&(r.legend.enabled=!1)}function Ht(r,t){r.title.text=t}function pa(r,t){r.yAxis.min=t}function xa(r,t){r.yAxis.max=t}function ga(r,t){var e=t?t===!0?"normal":t:null;r.plotOptions.series.stacking=e,r.plotOptions.area.stacking=e,r.plotOptions.areaspline.stacking=e}function wa(r,t){r.xAxis.title.text=t}function ba(r,t){r.yAxis.title.text=t}var Ke=be(It,Yt,Ht,pa,xa,ga,wa,ba);function Je(r,t,e){var n={prefix:r.options.prefix,suffix:r.options.suffix,thousands:r.options.thousands,decimal:r.options.decimal,precision:r.options.precision,round:r.options.round,zeros:r.options.zeros};e!=="pie"&&!re(t.yAxis)&&!t.yAxis.labels.formatter&&(t.yAxis.labels.formatter=function(){return B("",this.value,n)}),!t.tooltip.pointFormatter&&!t.tooltip.pointFormat&&(t.tooltip.pointFormatter=function(){return'<span style="color:'+this.color+'">●</span> '+B(this.series.name+": <b>",this.y,n)+"</b><br/>"})}var ee=function(t){this.name="highcharts",this.library=t};ee.prototype.renderLineChart=function(t,e){e=e||"spline";var n={};e==="areaspline"&&(n={plotOptions:{areaspline:{stacking:"normal"},area:{stacking:"normal"},series:{marker:{enabled:!1}}}}),t.options.curve===!1&&(e==="areaspline"?e="area":e==="spline"&&(e="line"));var a=Ke(t,t.options,n);t.xtype==="number"?a.xAxis.type=a.xAxis.type||"linear":a.xAxis.type=t.xtype==="string"?"category":"datetime",a.chart.type||(a.chart.type=e),Je(t,a,e);for(var i=t.data,o=0;o<i.length;o++){i[o].name=i[o].name||"Value";var d=i[o].data;if(t.xtype==="datetime")for(var u=0;u<d.length;u++)d[u][0]=d[u][0].getTime();else t.xtype==="number"&&d.sort(Ve);i[o].marker={symbol:"circle"},t.options.points===!1&&(i[o].marker.enabled=!1)}this.drawChart(t,i,a)};ee.prototype.renderScatterChart=function(t){var e=Ke(t,t.options,{});e.chart.type="scatter",this.drawChart(t,t.data,e)};ee.prototype.renderPieChart=function(t){var e=k(It,{});t.options.colors&&(e.colors=t.options.colors),t.options.donut&&(e.plotOptions={pie:{innerSize:"50%"}}),"legend"in t.options&&Yt(e,t.options.legend),t.options.title&&Ht(e,t.options.title);var n=k(e,t.options.library||{});Je(t,n,"pie");var a=[{type:"pie",name:t.options.label||"Value",data:t.data}];this.drawChart(t,a,n)};ee.prototype.renderColumnChart=function(t,e){e=e||"column";var n=t.data,a=Ke(t,t.options),i=[],o=[];a.chart.type=e,Je(t,a,e);for(var d=0;d<n.length;d++)for(var u=n[d],l=0;l<u.data.length;l++){var h=u.data[l];i[h[0]]||(i[h[0]]=new Array(n.length),o.push(h[0])),i[h[0]][d]=h[1]}t.xtype==="number"&&o.sort(kt),a.xAxis.categories=o;for(var g=[],p=0;p<n.length;p++){for(var D=[],x=0;x<o.length;x++)D.push(i[o[x]][p]||0);var j={name:n[p].name||"Value",data:D};n[p].stack&&(j.stack=n[p].stack),g.push(j)}this.drawChart(t,g,a)};ee.prototype.renderBarChart=function(t){this.renderColumnChart(t,"bar")};ee.prototype.renderAreaChart=function(t){this.renderLineChart(t,"areaspline")};ee.prototype.destroy=function(t){t.chart&&t.chart.destroy()};ee.prototype.drawChart=function(t,e,n){this.destroy(t),!t.destroyed&&(n.chart.renderTo=t.element.id,n.series=e,t.options.code&&window.console.log("new Highcharts.Chart("+JSON.stringify(n)+");"),t.chart=new this.library.Chart(n))};var pt={},Ce=[],ye={chartArea:{},fontName:"'Lucida Grande', 'Lucida Sans Unicode', Verdana, Arial, Helvetica, sans-serif",pointSize:6,legend:{textStyle:{fontSize:12,color:"#444"},alignment:"center",position:"right"},curveType:"function",hAxis:{textStyle:{color:"#666",fontSize:12},titleTextStyle:{},gridlines:{color:"transparent"},baselineColor:"#ccc",viewWindow:{}},vAxis:{textStyle:{color:"#666",fontSize:12},titleTextStyle:{},baselineColor:"#ccc",viewWindow:{}},tooltip:{textStyle:{color:"#666",fontSize:12}}};function et(r,t,e){if(t!==void 0){var n;t?t===!0?n="right":n=t:n="none",r.legend.position=n}else e&&(r.legend.position="none")}function tt(r,t){r.title=t,r.titleTextStyle={color:"#333",fontSize:"20px"}}function ya(r,t){r.vAxis.viewWindow.min=t}function va(r,t){r.vAxis.viewWindow.max=t}function _a(r,t){r.hAxis.viewWindow.min=t}function Na(r,t){r.hAxis.viewWindow.max=t}function qt(r,t){r.isStacked=t||!1}function St(r,t){r.hAxis.title=t,r.hAxis.titleTextStyle.italic=!1}function Bt(r,t){r.vAxis.title=t,r.vAxis.titleTextStyle.italic=!1}var Pe=be(ye,et,tt,ya,va,qt,St,Bt);function ja(r){window.attachEvent?window.attachEvent("onresize",r):window.addEventListener&&window.addEventListener("resize",r,!0),r()}var S=function(t){this.name="google",this.library=t};S.prototype.renderLineChart=function(t){var e=this;this.waitForLoaded(t,function(){var n={};t.options.curve===!1&&(n.curveType="none"),t.options.points===!1&&(n.pointSize=0);var a=Pe(t,t.options,n),i=e.createDataTable(t.data,t.xtype);e.drawChart(t,"LineChart",i,a)})};S.prototype.renderPieChart=function(t){var e=this;this.waitForLoaded(t,function(){var n={chartArea:{top:"10%",height:"80%"},legend:{}};t.options.colors&&(n.colors=t.options.colors),t.options.donut&&(n.pieHole=.5),"legend"in t.options&&et(n,t.options.legend),t.options.title&&tt(n,t.options.title);var a=k(k(ye,n),t.options.library||{}),i=new e.library.visualization.DataTable;i.addColumn("string",""),i.addColumn("number","Value"),i.addRows(t.data),e.drawChart(t,"PieChart",i,a)})};S.prototype.renderColumnChart=function(t){var e=this;this.waitForLoaded(t,function(){var n=Pe(t,t.options),a=e.createDataTable(t.data,t.xtype);e.drawChart(t,"ColumnChart",a,n)})};S.prototype.renderBarChart=function(t){var e=this;this.waitForLoaded(t,function(){var n={hAxis:{gridlines:{color:"#ccc"}}},a=be(ye,et,tt,_a,Na,qt,St,Bt)(t,t.options,n),i=e.createDataTable(t.data,t.xtype);e.drawChart(t,"BarChart",i,a)})};S.prototype.renderAreaChart=function(t){var e=this;this.waitForLoaded(t,function(){var n={isStacked:!0,pointSize:0,areaOpacity:.5},a=Pe(t,t.options,n),i=e.createDataTable(t.data,t.xtype);e.drawChart(t,"AreaChart",i,a)})};S.prototype.renderGeoChart=function(t){var e=this;this.waitForLoaded(t,"geochart",function(){var n={legend:"none",colorAxis:{colors:t.options.colors||["#f6c7b6","#ce502d"]}},a=k(k(ye,n),t.options.library||{}),i=new e.library.visualization.DataTable;i.addColumn("string",""),i.addColumn("number",t.options.label||"Value"),i.addRows(t.data),e.drawChart(t,"GeoChart",i,a)})};S.prototype.renderScatterChart=function(t){var e=this;this.waitForLoaded(t,function(){for(var n={},a=Pe(t,t.options,n),i=t.data,o=[],d=0;d<i.length;d++){i[d].name=i[d].name||"Value";for(var u=i[d].data,l=0;l<u.length;l++){var h=new Array(i.length+1);h[0]=u[l][0],h[d+1]=u[l][1],o.push(h)}}var g=new e.library.visualization.DataTable;g.addColumn("number","");for(var p=0;p<i.length;p++)g.addColumn("number",i[p].name);g.addRows(o),e.drawChart(t,"ScatterChart",g,a)})};S.prototype.renderTimeline=function(t){var e=this;this.waitForLoaded(t,"timeline",function(){var n={legend:"none"};t.options.colors&&(n.colors=t.options.colors);var a=k(k(ye,n),t.options.library||{}),i=new e.library.visualization.DataTable;i.addColumn({type:"string",id:"Name"}),i.addColumn({type:"date",id:"Start"}),i.addColumn({type:"date",id:"End"}),i.addRows(t.data),t.element.style.lineHeight="normal",e.drawChart(t,"Timeline",i,a)})};S.prototype.destroy=function(t){t.chart&&t.chart.clearChart()};S.prototype.drawChart=function(t,e,n,a){this.destroy(t),!t.destroyed&&(t.options.code&&window.console.log("var data = new google.visualization.DataTable("+n.toJSON()+`);
var chart = new google.visualization.`+e+`(element);
chart.draw(data, `+JSON.stringify(a)+");"),t.chart=new this.library.visualization[e](t.element),ja(function(){t.chart.draw(n,a)}))};S.prototype.waitForLoaded=function(t,e,n){var a=this;if(n||(n=e,e="corechart"),Ce.push({pack:e,callback:n}),pt[e])this.runCallbacks();else{pt[e]=!0;var i={packages:[e],callback:function(){a.runCallbacks()}},o=t.__config();o.language&&(i.language=o.language),e==="geochart"&&o.mapsApiKey&&(i.mapsApiKey=o.mapsApiKey),this.library.charts.load("current",i)}};S.prototype.runCallbacks=function(){for(var t=0;t<Ce.length;t++){var e=Ce[t],n=this.library.visualization&&(e.pack==="corechart"&&this.library.visualization.LineChart||e.pack==="timeline"&&this.library.visualization.Timeline||e.pack==="geochart"&&this.library.visualization.GeoChart);n&&(e.callback(),Ce.splice(t,1),t--)}};S.prototype.createDataTable=function(t,e){for(var n=[],a=[],i=0;i<t.length;i++){var o=t[i];t[i].name=t[i].name||"Value";for(var d=0;d<o.data.length;d++){var u=o.data[d],l=e==="datetime"?u[0].getTime():u[0];n[l]||(n[l]=new Array(t.length),a.push(l)),n[l][i]=u[1]}}for(var h=[],g=[],p=0;p<a.length;p++){var D=a[p],x=void 0;e==="datetime"?(x=new Date(D),g.push(x)):x=D,h.push([x].concat(n[D]))}var j=!0;if(e==="datetime"){h.sort(ea);var E=Pt(g,!0);j=ta(E)}else if(e==="number"){h.sort(Ve);for(var Y=0;Y<h.length;Y++)h[Y][0]=J(h[Y][0]);e="string"}var M=new this.library.visualization.DataTable;e=e==="datetime"&&j?"date":e,M.addColumn(e,"");for(var I=0;I<t.length;I++)M.addColumn("number",t[I].name);return M.addRows(h),M};var ie=[];function Ca(r){if(r){if(r.product==="Highcharts")return ee;if(r.charts)return S;if(We(r))return Q}throw new Error("Unknown adapter")}function he(r){for(var t=Ca(r),e=0;e<ie.length;e++)if(ie[e].library===r)return;ie.push(new t(r))}function Da(){"Chart"in window&&he(window.Chart),"Highcharts"in window&&he(window.Highcharts),window.google&&window.google.charts&&he(window.google)}function Ma(r,t){var e="render"+r,n=t.options.adapter;Da();for(var a=0;a<ie.length;a++){var i=ie[a];if((!n||n===i.name)&&We(i[e]))return t.adapter=i.name,t.__adapterObject=i,i[e](t)}throw ie.length>0?new Error("No charting library found for "+r):new Error("No charting libraries found - be sure to include one before your charts")}var b={charts:{},configure:function(r){for(var t in r)Object.prototype.hasOwnProperty.call(r,t)&&(b.config[t]=r[t])},setDefaultOptions:function(r){b.options=r},eachChart:function(r){for(var t in b.charts)Object.prototype.hasOwnProperty.call(b.charts,t)&&r(b.charts[t])},destroyAll:function(){for(var r in b.charts)Object.prototype.hasOwnProperty.call(b.charts,r)&&(b.charts[r].destroy(),delete b.charts[r])},config:{},options:{},adapters:ie,addAdapter:he,use:function(r){return he(r),b}};function Oa(r){for(var t=[],e=0;e<r.length;e++)t.push([V(r[e][0]),V(r[e][1]),V(r[e][2])]);return t}function Ta(r,t){if(t==="bubble")return Oa(r);var e;t==="number"?e=V:t==="datetime"?e=z:e=J;for(var n=[],a=0;a<r.length;a++)n.push([e(r[a][0]),V(r[a][1])]);return n}function ka(r,t,e){return Wt(r)?(e.xmin||e.xmax)&&(!e.xmin||Ae(e.xmin))&&(!e.xmax||Ae(e.xmax))?"datetime":"number":xt(r,ra)?"number":!t&&xt(r,Ae)?"datetime":"string"}function xt(r,t){for(var e=0;e<r.length;e++)for(var n=$e(r[e].data),a=0;a<n.length;a++)if(!t(n[a][0]))return!1;return!0}function Pa(r){for(var t=[],e=0;e<r.length;e++){var n={};for(var a in r[e])Object.prototype.hasOwnProperty.call(r[e],a)&&(n[a]=r[e][a]);t.push(n)}return t}function ce(r,t,e){var n=r.options,a=r.rawData;r.singleSeriesFormat=!re(a)||!je(a[0]),r.singleSeriesFormat&&(a=[{name:n.label,data:a}]),a=Pa(a);for(var i=0;i<a.length;i++)a[i].data=$e(a[i].data);r.xtype=t||(n.discrete?"string":ka(a,e,n));for(var o=0;o<a.length;o++)a[o].data=Ta(a[o].data,r.xtype);return a}function zt(r){for(var t=$e(r.rawData),e=0;e<t.length;e++)t[e]=[J(t[e][0]),V(t[e][1])];return t}function Wt(r,t){if(t==="PieChart"||t==="GeoChart"||t==="Timeline")return r.length===0;for(var e=0;e<r.length;e++)if(r[e].data.length>0)return!1;return!0}function Fa(r){var t=r.options.download;t===!0?t={}:typeof t=="string"&&(t={filename:t});var e=document.createElement("a");e.download=t.filename||"chart.png",e.style.position="absolute",e.style.top="20px",e.style.right="20px",e.style.zIndex=1e3,e.style.lineHeight="20px",e.target="_blank";var n=document.createElement("img"),a='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><!--! Font Awesome Free 6.2.1 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2022 Fonticons, Inc. --><path fill="#CCCCCC" d="M344 240h-56L287.1 152c0-13.25-10.75-24-24-24h-16C234.7 128 223.1 138.8 223.1 152L224 240h-56c-9.531 0-18.16 5.656-22 14.38C142.2 263.1 143.9 273.3 150.4 280.3l88.75 96C243.7 381.2 250.1 384 256.8 384c7.781-.3125 13.25-2.875 17.75-7.844l87.25-96c6.406-7.031 8.031-17.19 4.188-25.88S353.5 240 344 240zM256 0C114.6 0 0 114.6 0 256s114.6 256 256 256s256-114.6 256-256S397.4 0 256 0zM256 464c-114.7 0-208-93.31-208-208S141.3 48 256 48s208 93.31 208 208S370.7 464 256 464z"/></svg>';n.src="data:image/svg+xml;utf8,"+encodeURIComponent(a),n.alt="Download",n.style.width="20px",n.style.height="20px",n.style.border="none",e.appendChild(n);var i=r.element;i.style.position="relative",r.__downloadAttached=!0,r.__enterEvent=i.addEventListener("mouseover",function(o){var d=o.relatedTarget;(!d||d!==this&&!this.contains(d))&&r.options.download&&(e.href=r.toImage(t),i.appendChild(e))}),r.__leaveEvent=i.addEventListener("mouseout",function(o){var d=o.relatedTarget;(!d||d!==this&&!this.contains(d))&&e.parentNode&&e.parentNode.removeChild(e)})}var $t=[],Ie=0,La=4;function Aa(r,t,e){$t.push([r,t,e]),rt()}function rt(){if(Ie<La){var r=$t.shift();r&&(Ie++,Ra(r[0],r[1],r[2]),rt())}}function Ea(){Ie--,rt()}function Ra(r,t,e){var n=new XMLHttpRequest;n.open("GET",r,!0),n.setRequestHeader("Content-Type","application/json"),n.onload=function(){Ea(),n.status===200?t(JSON.parse(n.responseText)):e(n.statusText)},n.send()}function nt(r,t){r.textContent=t}function De(r,t,e){e||(t="Error Loading Chart: "+t),nt(r,t),r.style.color="#ff0000"}function Ee(r){try{r.__render()}catch(t){throw De(r.element,t.message),t}}function pe(r,t,e){if(e&&r.options.loading&&(typeof t=="string"||typeof t=="function")&&nt(r.element,r.options.loading),typeof t=="string")Aa(t,function(n){r.rawData=n,Ee(r)},function(n){De(r.element,n)});else if(typeof t=="function")try{t(function(n){r.rawData=n,Ee(r)},function(n){De(r.element,n,!0)})}catch(n){De(r.element,n,!0)}else r.rawData=t,Ee(r)}function Ia(r,t){if(Wt(t.data,r)){var e=t.options.empty||t.options.messages&&t.options.messages.empty||"No data";nt(t.element,e)}else Ma(r,t),t.options.download&&!t.__downloadAttached&&t.adapter==="chartjs"&&Fa(t)}function Ya(r){if(typeof r=="string"){var t=r;if(r=document.getElementById(r),!r)throw new Error("No element with id "+t)}return r}var C=function(t,e,n){this.element=Ya(t),this.options=k(b.options,n||{}),this.dataSource=e,this.element.id&&(b.charts[this.element.id]=this),pe(this,e,!0),this.options.refresh&&this.startRefresh()};C.prototype.getElement=function(){return this.element};C.prototype.getDataSource=function(){return this.dataSource};C.prototype.getData=function(){return this.data};C.prototype.getOptions=function(){return this.options};C.prototype.getChartObject=function(){return this.chart};C.prototype.getAdapter=function(){return this.adapter};C.prototype.updateData=function(t,e){this.dataSource=t,e&&this.__updateOptions(e),pe(this,t,!0)};C.prototype.setOptions=function(t){this.__updateOptions(t),this.redraw()};C.prototype.redraw=function(){pe(this,this.rawData)};C.prototype.refreshData=function(){if(typeof this.dataSource=="string"){var t=this.dataSource.indexOf("?")===-1?"?":"&",e=this.dataSource+t+"_="+new Date().getTime();pe(this,e)}else typeof this.dataSource=="function"&&pe(this,this.dataSource)};C.prototype.startRefresh=function(){var t=this,e=this.options.refresh;if(e&&typeof this.dataSource!="string"&&typeof this.dataSource!="function")throw new Error("Data source must be a URL or callback for refresh");if(!this.intervalId)if(e)this.intervalId=setInterval(function(){t.refreshData()},e*1e3);else throw new Error("No refresh interval")};C.prototype.stopRefresh=function(){this.intervalId&&(clearInterval(this.intervalId),this.intervalId=null)};C.prototype.toImage=function(t){if(this.adapter==="chartjs")if(t&&t.background&&t.background!=="transparent"){var e=this.chart.canvas,n=this.chart.ctx,a=document.createElement("canvas"),i=a.getContext("2d");return a.width=n.canvas.width,a.height=n.canvas.height,i.fillStyle=t.background,i.fillRect(0,0,a.width,a.height),i.drawImage(e,0,0),a.toDataURL("image/png")}else return this.chart.toBase64Image();else throw new Error("Feature only available for Chart.js")};C.prototype.destroy=function(){this.destroyed=!0,this.stopRefresh(),this.__adapterObject&&this.__adapterObject.destroy(this),this.__enterEvent&&this.element.removeEventListener("mouseover",this.__enterEvent),this.__leaveEvent&&this.element.removeEventListener("mouseout",this.__leaveEvent)};C.prototype.__updateOptions=function(t){var e=t.refresh&&t.refresh!==this.options.refresh;this.options=k(b.options,t),e&&(this.stopRefresh(),this.startRefresh())};C.prototype.__render=function(){this.data=this.__processData(),Ia(this.__chartName(),this)};C.prototype.__config=function(){return b.config};var Ha=function(r){function t(){r.apply(this,arguments)}return r&&(t.__proto__=r),t.prototype=Object.create(r&&r.prototype),t.prototype.constructor=t,t.prototype.__processData=function(){return ce(this)},t.prototype.__chartName=function(){return"LineChart"},t}(C),qa=function(r){function t(){r.apply(this,arguments)}return r&&(t.__proto__=r),t.prototype=Object.create(r&&r.prototype),t.prototype.constructor=t,t.prototype.__processData=function(){return zt(this)},t.prototype.__chartName=function(){return"PieChart"},t}(C),Sa=function(r){function t(){r.apply(this,arguments)}return r&&(t.__proto__=r),t.prototype=Object.create(r&&r.prototype),t.prototype.constructor=t,t.prototype.__processData=function(){return ce(this,null,!0)},t.prototype.__chartName=function(){return"ColumnChart"},t}(C),Ba=function(r){function t(){r.apply(this,arguments)}return r&&(t.__proto__=r),t.prototype=Object.create(r&&r.prototype),t.prototype.constructor=t,t.prototype.__processData=function(){return ce(this,null,!0)},t.prototype.__chartName=function(){return"BarChart"},t}(C),za=function(r){function t(){r.apply(this,arguments)}return r&&(t.__proto__=r),t.prototype=Object.create(r&&r.prototype),t.prototype.constructor=t,t.prototype.__processData=function(){return ce(this)},t.prototype.__chartName=function(){return"AreaChart"},t}(C),Wa=function(r){function t(){r.apply(this,arguments)}return r&&(t.__proto__=r),t.prototype=Object.create(r&&r.prototype),t.prototype.constructor=t,t.prototype.__processData=function(){return zt(this)},t.prototype.__chartName=function(){return"GeoChart"},t}(C),$a=function(r){function t(){r.apply(this,arguments)}return r&&(t.__proto__=r),t.prototype=Object.create(r&&r.prototype),t.prototype.constructor=t,t.prototype.__processData=function(){return ce(this,"number")},t.prototype.__chartName=function(){return"ScatterChart"},t}(C),Va=function(r){function t(){r.apply(this,arguments)}return r&&(t.__proto__=r),t.prototype=Object.create(r&&r.prototype),t.prototype.constructor=t,t.prototype.__processData=function(){return ce(this,"bubble")},t.prototype.__chartName=function(){return"BubbleChart"},t}(C),Qa=function(r){function t(){r.apply(this,arguments)}return r&&(t.__proto__=r),t.prototype=Object.create(r&&r.prototype),t.prototype.constructor=t,t.prototype.__processData=function(){for(var n=this.rawData,a=0;a<n.length;a++)n[a][1]=z(n[a][1]),n[a][2]=z(n[a][2]);return n},t.prototype.__chartName=function(){return"Timeline"},t}(C);b.LineChart=Ha;b.PieChart=qa;b.ColumnChart=Sa;b.BarChart=Ba;b.AreaChart=za;b.GeoChart=Wa;b.ScatterChart=$a;b.BubbleChart=Va;b.Timeline=Qa;typeof window<"u"&&!window.Chartkick&&(window.Chartkick=b,document.addEventListener("turbolinks:before-render",function(){b.config.autoDestroy!==!1&&b.destroyAll()}),document.addEventListener("turbo:before-render",function(){b.config.autoDestroy!==!1&&b.destroyAll()}),setTimeout(function(){window.dispatchEvent(new Event("chartkick:load"))},0));b.default=b;/*!
 * React Chartkick v0.5.4
 * Create beautiful JavaScript charts with one line of React
 * https://github.com/ankane/react-chartkick
 * MIT License
 */function Ga(r,t){var e={};for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&t.indexOf(n)===-1&&(e[n]=r[n]);return e}var Xa=1,Za=function(r){function t(){r.apply(this,arguments)}return r&&(t.__proto__=r),t.prototype=Object.create(r&&r.prototype),t.prototype.constructor=t,t.prototype.newChartType=function(n){var a=n.data,i={};for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&o!=="data"&&o!=="id"&&o!=="height"&&o!=="width"&&(i[o]=n[o]);this.element&&(this.chart?this.chart.updateData(a,i):this.chart=new n.chartType(this.element,a,i))},t.prototype.componentDidMount=function(){this.newChartType(this.props)},t.prototype.componentDidUpdate=function(){this.newChartType(this.props)},t.prototype.componentWillUnmount=function(){this.chart&&(this.chart.destroy(),this.chart=void 0)},t.prototype.render=function(){var n=this,a=this.props,i={height:a.height||"300px",lineHeight:a.height||"300px",width:a.width||"100%",textAlign:"center",color:"#999",fontSize:"14px",fontFamily:"'Lucida Grande', 'Lucida Sans Unicode', Verdana, Arial, Helvetica, sans-serif"};this.chartId=a.id||this.chartId||"chart-"+Xa++;var o=a.loading!==void 0?a.loading:"Loading...";if(typeof o!="string")throw new Error("loading must be a string");return Me.createElement("div",{id:this.chartId,style:i,ref:function(d){return n.element=d}},o)},t}(Me.Component),ne=function(r){var t=function(e){var n=e.innerRef,a=Ga(e,["innerRef"]),i=a;return i.chartType=r,i.ref=n,Me.createElement(Za,i)};return t.displayName=r.name,t},Ua=ne(b.LineChart),gt=ne(b.PieChart);ne(b.ColumnChart);var Ka=ne(b.BarChart);ne(b.AreaChart);ne(b.ScatterChart);ne(b.GeoChart);ne(b.Timeline);wt.register(...Ut);/*!
 * chartjs-adapter-date-fns v3.0.0
 * https://www.chartjs.org
 * (c) 2022 chartjs-adapter-date-fns Contributors
 * Released under the MIT license
 */const Ja={datetime:"MMM d, yyyy, h:mm:ss aaaa",millisecond:"h:mm:ss.SSS aaaa",second:"h:mm:ss aaaa",minute:"h:mm aaaa",hour:"ha",day:"MMM d",week:"PP",month:"MMM yyyy",quarter:"qqq - yyyy",year:"yyyy"};Kt._date.override({_id:"date-fns",formats:function(){return Ja},parse:function(r,t){if(r===null||typeof r>"u")return null;const e=typeof r;return e==="number"||r instanceof Date?r=_(r):e==="string"&&(typeof t=="string"?r=Pn(r,t,new Date,this.options):r=Rn(r,this.options)),dr(r)?r.getTime():null},format:function(r,t){return cr(r,t,this.options)},add:function(r,t,e){switch(e){case"millisecond":return qe(r,t);case"second":return mr(r,t);case"minute":return fr(r,t);case"hour":return ur(r,t);case"day":return Te(r,t);case"week":return pr(r,t);case"month":return He(r,t);case"quarter":return hr(r,t);case"year":return xr(r,t);default:return r}},diff:function(r,t,e){switch(e){case"millisecond":return Se(r,t);case"second":return Nr(r,t);case"minute":return yr(r,t);case"hour":return br(r,t);case"day":return vt(r,t);case"week":return jr(r,t);case"month":return jt(r,t);case"quarter":return _r(r,t);case"year":return Cr(r,t);default:return 0}},startOf:function(r,t,e){switch(t){case"second":return En(r);case"minute":return An(r);case"hour":return Ln(r);case"day":return lr(r);case"week":return me(r);case"isoWeek":return me(r,{weekStartsOn:+e});case"month":return Mr(r);case"quarter":return Dr(r);case"year":return or(r);default:return r}},endOf:function(r,t){switch(t){case"second":return Lr(r);case"minute":return Pr(r);case"hour":return Tr(r);case"day":return _t(r);case"week":return kr(r);case"month":return Nt(r);case"quarter":return Fr(r);case"year":return Or(r);default:return r}}});function ls({auth:r,ventes:t,statsGlobales:e,depenses:n,stocks:a,valeurStock:i}){b.use(wt);const o=new Date().toISOString().split("T")[0],[d,u]=_e.useState({dateDebut:o,dateFin:o,statut:"tous",typeVente:"tous",search:"",viewMode:"day"}),[l,h]=_e.useState(1),[g,p]=_e.useState(10),[D,x]=_e.useState(null),j=t.filter(c=>{const m=(!d.dateDebut||new Date(c.created_at)>=new Date(d.dateDebut))&&(!d.dateFin||new Date(c.created_at)<=new Date(d.dateFin+"T23:59:59")),v=d.statut==="tous"||c.statut===d.statut,A=!d.search||c.code.toLowerCase().includes(d.search.toLowerCase())||c.client&&c.client.name.toLowerCase().includes(d.search.toLowerCase());return m&&v&&A}),E=Math.ceil(j.length/g),Y=j.slice((l-1)*g,l*g),M={totalVentes:j.length,totalHT:j.reduce((c,m)=>c+m.total_ht,0),totalTVA:j.reduce((c,m)=>c+m.total_tva,0),totalTTC:j.reduce((c,m)=>c+m.total_ttc,0),totalRemise:j.reduce((c,m)=>c+m.montant_remise,0),avgPanier:j.length>0?j.reduce((c,m)=>c+m.total_ttc,0)/j.length:0,produitsVendus:j.reduce((c,m)=>c+m.articles_vente.reduce((v,A)=>v+A.quantite,0),0)},I=()=>{const c={},m={},v={Terminée:0,Annulée:0,"En cours":0},A={},H={},se={};return j.forEach(K=>{const Fe=new Date(K.created_at),at=Fe.getFullYear()+"-"+String(Fe.getMonth()+1).padStart(2,"0")+"-"+String(Fe.getDate()).padStart(2,"0");c[at]=(c[at]||0)+K.total_ttc,K.statut==="terminee"?v.Terminée+=K.total_ttc:K.statut==="annulee"?v.Annulée+=K.total_ttc:v["En cours"]+=K.total_ttc,K.articles_vente&&K.articles_vente.forEach(de=>{var it,ot,lt;const st=((it=de.rayon)==null?void 0:it.nom)||"Autres";m[st]=(m[st]||0)+de.montant_ttc;const ve=((lt=(ot=de.produit)==null?void 0:ot.categorie)==null?void 0:lt.name)||"Non catégorisé";A[ve]=(A[ve]||0)+de.montant_ttc,H[ve]=(H[ve]||0)+de.quantite})}),{ventesParJour:c,ventesParCategorie:m,ventesParStatut:v,ventesParCategorieProduit:A,produitsVendusParCategorie:H,stocksParRayon:se}},{ventesParJour:R,ventesParCategorie:G,ventesParCategorieProduit:X={},produitsVendusParCategorie:Z={}}=I(),w=Object.entries(R).sort(([c],[m])=>new Date(c)-new Date(m)).reduce((c,[m,v])=>({...c,[m]:v}),{}),y=c=>{const{name:m,value:v}=c.target;u(A=>({...A,[m]:v})),h(1)},O=c=>{const m=new Date;let v,A;switch(c){case"today":v=A=m.toISOString().split("T")[0];break;case"week":const H=m.getDay(),se=m.getDate()-H+(H===0?-6:1);v=new Date(m.setDate(se)).toISOString().split("T")[0],A=new Date(m.setDate(se+6)).toISOString().split("T")[0];break;case"month":v=new Date(m.getFullYear(),m.getMonth(),1).toISOString().split("T")[0],A=new Date(m.getFullYear(),m.getMonth()+1,0).toISOString().split("T")[0];break;case"year":v=new Date(m.getFullYear(),0,1).toISOString().split("T")[0],A=new Date(m.getFullYear(),11,31).toISOString().split("T")[0];break;default:v=A=m.toISOString().split("T")[0]}u(H=>({...H,dateDebut:v,dateFin:A,viewMode:c}))},ae=c=>{x(D===c?null:c)},U=()=>{Xt.post(route("stats.export"),{filters:d})};return s.jsxs(Zt,{children:[s.jsx(Gt,{title:"Les Statistiques"}),s.jsxs("div",{className:"container mx-auto px-4 py-8",children:[s.jsx("h1",{className:"text-3xl font-bold mb-6",children:"Les Statistiques de Vente"}),s.jsxs("div",{className:"flex flex-wrap gap-2 mb-6",children:[s.jsx("button",{onClick:()=>O("today"),className:`btn ${d.viewMode==="today"?"btn-primary":"btn-outline"}`,children:"Aujourd'hui"}),s.jsx("button",{onClick:()=>O("week"),className:`btn ${d.viewMode==="week"?"btn-primary":"btn-outline"}`,children:"Cette semaine"}),s.jsx("button",{onClick:()=>O("month"),className:`btn ${d.viewMode==="month"?"btn-primary":"btn-outline"}`,children:"Ce mois"}),s.jsx("button",{onClick:()=>O("year"),className:`btn ${d.viewMode==="year"?"btn-primary":"btn-outline"}`,children:"Cette année"})]}),s.jsxs("div",{className:"bg-base-200 p-6 rounded-lg mb-6",children:[s.jsx("h2",{className:"text-xl font-semibold mb-4",children:"Filtres avancés"}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4",children:[s.jsxs("div",{className:"form-control",children:[s.jsx("label",{className:"label",children:s.jsx("span",{className:"label-text",children:"Date de début"})}),s.jsx("input",{type:"date",name:"dateDebut",value:d.dateDebut,onChange:y,className:"input input-bordered w-full"})]}),s.jsxs("div",{className:"form-control",children:[s.jsx("label",{className:"label",children:s.jsx("span",{className:"label-text",children:"Date de fin"})}),s.jsx("input",{type:"date",name:"dateFin",value:d.dateFin,onChange:y,className:"input input-bordered w-full"})]}),s.jsxs("div",{className:"form-control",children:[s.jsx("label",{className:"label",children:s.jsx("span",{className:"label-text",children:"Statut"})}),s.jsxs("select",{name:"statut",value:d.statut,onChange:y,className:"select select-bordered w-full",children:[s.jsx("option",{value:"tous",children:"Tous"}),s.jsx("option",{value:"terminee",children:"Terminée"}),s.jsx("option",{value:"annulee",children:"Annulée"}),s.jsx("option",{value:"encours",children:"En cours"})]})]}),s.jsxs("div",{className:"form-control",children:[s.jsx("label",{className:"label",children:s.jsx("span",{className:"label-text",children:"Recherche"})}),s.jsx("input",{type:"text",name:"search",placeholder:"N° facture, client...",value:d.search,onChange:y,className:"input input-bordered w-full"})]})]})]}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6 mb-8",children:[s.jsx("div",{className:"stats bg-primary text-primary-content shadow",children:s.jsxs("div",{className:"stat",children:[s.jsx("div",{className:"stat-title",children:"Total Ventes"}),s.jsx("div",{className:"stat-value",children:M.totalVentes}),s.jsx("div",{className:"stat-desc",children:"Transactions"})]})}),s.jsx("div",{className:"stats bg-secondary text-secondary-content shadow",children:s.jsxs("div",{className:"stat",children:[s.jsx("div",{className:"stat-title",children:"Chiffre d'affaires"}),s.jsxs("div",{className:"stat-value",children:[M.totalTTC.toLocaleString("fr-FR")," FC"]}),s.jsx("div",{className:"stat-desc",children:"TTC"})]})}),s.jsx("div",{className:"stats bg-accent text-accent-content shadow",children:s.jsxs("div",{className:"stat",children:[s.jsx("div",{className:"stat-title",children:"Panier moyen"}),s.jsxs("div",{className:"stat-value",children:[M.avgPanier.toLocaleString("fr-FR",{minimumFractionDigits:2,maximumFractionDigits:2})," FC"]}),s.jsx("div",{className:"stat-desc",children:"Par transaction"})]})}),s.jsx("div",{className:"stats bg-neutral text-neutral-content shadow",children:s.jsxs("div",{className:"stat",children:[s.jsx("div",{className:"stat-title",children:"Produits vendus"}),s.jsx("div",{className:"stat-value",children:M.produitsVendus}),s.jsx("div",{className:"stat-desc",children:"Articles"})]})})]}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6 mb-8",children:[s.jsx("div",{className:"stats bg-base-200 shadow",children:s.jsxs("div",{className:"stat",children:[s.jsx("div",{className:"stat-title",children:"Montant HT"}),s.jsxs("div",{className:"stat-value",children:[M.totalHT.toLocaleString("fr-FR")," FC"]}),s.jsx("div",{className:"stat-desc",children:"Hors taxes"})]})}),s.jsx("div",{className:"stats bg-base-200 shadow",children:s.jsxs("div",{className:"stat",children:[s.jsx("div",{className:"stat-title",children:"TVA Collectée"}),s.jsxs("div",{className:"stat-value",children:[M.totalTVA.toLocaleString("fr-FR")," FC"]}),s.jsx("div",{className:"stat-desc",children:"Total TVA"})]})}),s.jsx("div",{className:"stats bg-base-200 shadow",children:s.jsxs("div",{className:"stat",children:[s.jsx("div",{className:"stat-title",children:"Remises accordées"}),s.jsxs("div",{className:"stat-value",children:[M.totalRemise.toLocaleString("fr-FR")," FC"]}),s.jsx("div",{className:"stat-desc",children:"Total remises"})]})})]}),s.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6 mb-8",children:[s.jsxs("div",{className:"bg-base-200 p-6 rounded-lg shadow",children:[s.jsx("h2",{className:"text-xl font-semibold mb-4",children:"Évolution des ventes"}),s.jsx("div",{className:"h-80",children:s.jsx(Ua,{data:w,colors:["#3b82f6"],library:{scales:{y:{beginAtZero:!0}}},suffix:" FC"})})]}),s.jsxs("div",{className:"bg-base-200 p-6 rounded-lg shadow",children:[s.jsx("h2",{className:"text-xl font-semibold mb-4",children:"Répartition par catégorie"}),s.jsx("div",{className:"h-80",children:Object.keys(G).length>0?s.jsx(gt,{data:G,donut:!0,library:{plugins:{legend:{position:"right"}}},suffix:" FC"}):s.jsx("div",{className:"h-full flex items-center justify-center text-gray-500",children:"Aucune donnée disponible"})})]})]}),s.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6 mb-8",children:[s.jsxs("div",{className:"bg-base-200 p-6 rounded-lg shadow",children:[s.jsx("h2",{className:"text-xl font-semibold mb-4",children:"Ventes par catégorie de produit"}),s.jsx("div",{className:"h-80",children:Object.keys(X).length>0?s.jsx(Ka,{data:X,colors:["#10b981"],library:{indexAxis:"y",scales:{x:{beginAtZero:!0}}},suffix:" FC"}):s.jsx("div",{className:"h-full flex items-center justify-center text-gray-500",children:"Aucune donnée disponible"})})]}),s.jsxs("div",{className:"bg-base-200 p-6 rounded-lg shadow",children:[s.jsx("h2",{className:"text-xl font-semibold mb-4",children:"Quantités vendues par catégorie"}),s.jsx("div",{className:"h-80",children:Object.keys(Z).length>0?s.jsx(gt,{data:Z,donut:!0,colors:["#3b82f6","#10b981","#f59e0b","#ef4444","#8b5cf6"],suffix:" unités"}):s.jsx("div",{className:"h-full flex items-center justify-center text-gray-500",children:"Aucune donnée disponible"})})]})]}),s.jsxs("div",{className:"bg-base-200 p-6 rounded-lg shadow mb-8",children:[s.jsx("h2",{className:"text-xl font-semibold mb-4",children:"Mes Dépenses"}),n&&n.length>0?s.jsxs(s.Fragment,{children:[s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6 mb-6",children:[s.jsx("div",{className:"stats bg-error text-error-content",children:s.jsxs("div",{className:"stat",children:[s.jsx("div",{className:"stat-title",children:"Total Dépenses"}),s.jsxs("div",{className:"stat-value",children:[n.reduce((c,m)=>c+m.montant_converti,0).toLocaleString("fr-FR")," FC"]})]})}),s.jsx("div",{className:"stats bg-warning text-warning-content",children:s.jsxs("div",{className:"stat",children:[s.jsx("div",{className:"stat-title",children:"Moyenne par jour"}),s.jsxs("div",{className:"stat-value",children:[(n.reduce((c,m)=>c+m.montant_converti,0)/n.length).toLocaleString("fr-FR",{maximumFractionDigits:2})," FC"]})]})}),s.jsx("div",{className:"stats bg-info text-info-content",children:s.jsxs("div",{className:"stat",children:[s.jsx("div",{className:"stat-title",children:"Mode de paiement favori"}),s.jsx("div",{className:"stat-value",children:(()=>{const c={};return n.forEach(m=>c[m.mode_paiement]=(c[m.mode_paiement]||0)+1),Object.keys(c).reduce((m,v)=>c[m]>c[v]?m:v)})()})]})})]}),s.jsx("div",{className:"overflow-x-auto",children:s.jsxs("table",{className:"table w-full",children:[s.jsx("thead",{children:s.jsxs("tr",{children:[s.jsx("th",{children:"Date"}),s.jsx("th",{children:"Description"}),s.jsx("th",{children:"Montant"}),s.jsx("th",{children:"Mode paiement"}),s.jsx("th",{children:"Bénéficiaire"})]})}),s.jsx("tbody",{children:n.slice(0,5).map(c=>s.jsxs("tr",{children:[s.jsx("td",{children:new Date(c.date_depense).toLocaleDateString("fr-FR")}),s.jsx("td",{children:c.description}),s.jsxs("td",{children:[c.montant_converti.toLocaleString("fr-FR")," FC"]}),s.jsx("td",{children:s.jsx("span",{className:"badge badge-outline capitalize",children:c.mode_paiement})}),s.jsx("td",{children:c.beneficiaire||"-"})]},c.id))})]})}),n.length>5&&s.jsx("div",{className:"text-center mt-4",children:s.jsxs("button",{className:"btn btn-sm btn-ghost",children:["Voir toutes les dépenses (",n.length,")"]})})]}):s.jsx("div",{className:"text-center py-8 text-gray-500",children:"Aucune dépense enregistrée pour cette période"})]}),s.jsxs("div",{className:"bg-base-100 rounded-lg shadow mb-8",children:[s.jsxs("div",{className:"flex justify-between items-center p-4 border-b",children:[s.jsx("h2",{className:"text-xl font-semibold",children:"Historique des ventes"}),s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("div",{className:"",children:s.jsx("span",{className:"text-sm",children:"Afficher :"})}),s.jsx("div",{className:"",children:s.jsxs("select",{className:"select select-bordered select-md",value:g,onChange:c=>p(Number(c.target.value)),children:[s.jsx("option",{value:"10",children:"10"}),s.jsx("option",{value:"25",children:"25"}),s.jsx("option",{value:"50",children:"50"}),s.jsx("option",{value:"100",children:"100"})]})})]})]}),s.jsx("div",{className:"overflow-x-auto",children:s.jsxs("table",{className:"table w-full",children:[s.jsx("thead",{children:s.jsxs("tr",{children:[s.jsx("th",{children:"N° Facture"}),s.jsx("th",{children:"Client"}),s.jsx("th",{children:"Date"}),s.jsx("th",{className:"text-right",children:"Montant TTC"}),s.jsx("th",{children:"Statut"}),s.jsx("th",{children:"Actions"})]})}),s.jsx("tbody",{children:Y.length>0?Y.map(c=>{var m,v,A;return s.jsxs(Me.Fragment,{children:[s.jsxs("tr",{children:[s.jsx("td",{children:c.code}),s.jsx("td",{children:((m=c.client)==null?void 0:m.name)||"Non spécifié"}),s.jsx("td",{children:new Date(c.created_at).toLocaleDateString("fr-FR")}),s.jsxs("td",{className:"text-right",children:[c.total_ttc.toLocaleString("fr-FR")," FC"]}),s.jsx("td",{children:s.jsx("span",{className:`badge ${c.statut==="terminee"?"badge-success":c.statut==="annulee"?"badge-error":"badge-warning"}`,children:c.statut==="terminee"?"Terminée":c.statut==="annulee"?"Annulée":"En cours"})}),s.jsx("td",{children:s.jsx("button",{onClick:()=>ae(c.id),className:"btn btn-sm btn-ghost",children:D===c.id?s.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 15l7-7 7 7"})}):s.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 9l-7 7-7-7"})})})})]}),D===c.id&&s.jsx("tr",{children:s.jsx("td",{colSpan:"6",className:"bg-base-200 p-4",children:s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[s.jsxs("div",{children:[s.jsx("h3",{className:"font-semibold mb-2",children:"Détails de la vente"}),s.jsxs("div",{className:"space-y-1",children:[s.jsxs("p",{children:[s.jsx("span",{className:"font-medium",children:"HT:"})," ",c.total_ht.toLocaleString("fr-FR")," FC"]}),s.jsxs("p",{children:[s.jsx("span",{className:"font-medium",children:"TVA:"})," ",c.total_tva.toLocaleString("fr-FR")," FC"]}),s.jsxs("p",{children:[s.jsx("span",{className:"font-medium",children:"Remise:"})," ",c.montant_remise.toLocaleString("fr-FR")," FC"]}),s.jsxs("p",{children:[s.jsx("span",{className:"font-medium",children:"Payé:"})," ",c.montant_paye.toLocaleString("fr-FR")," FC"]}),c.notes&&s.jsxs("p",{children:[s.jsx("span",{className:"font-medium",children:"Notes:"})," ",c.notes]})]})]}),s.jsxs("div",{children:[s.jsxs("h3",{className:"font-semibold mb-2",children:["Articles (",((v=c.articles_vente)==null?void 0:v.length)||0,")"]}),s.jsx("div",{className:"overflow-x-auto",children:s.jsxs("table",{className:"table table-xs",children:[s.jsx("thead",{children:s.jsxs("tr",{children:[s.jsx("th",{children:"Produit"}),s.jsx("th",{children:"Qté"}),s.jsx("th",{children:"Prix"}),s.jsx("th",{children:"Total"})]})}),s.jsx("tbody",{children:(A=c.articles_vente)==null?void 0:A.map(H=>{var se;return s.jsxs("tr",{children:[s.jsx("td",{children:((se=H.produit)==null?void 0:se.nom)||"N/A"}),s.jsx("td",{children:H.quantite}),s.jsxs("td",{children:[H.prix_unitaire.toLocaleString("fr-FR")," FC"]}),s.jsxs("td",{children:[H.montant_ttc.toLocaleString("fr-FR")," FC"]})]},H.id)})})]})})]})]})})})]},c.id)}):s.jsx("tr",{children:s.jsx("td",{colSpan:"6",className:"text-center py-8",children:s.jsxs("div",{className:"flex flex-col items-center justify-center",children:[s.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-12 w-12 text-gray-400 mb-2",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9.172 16.172a4 4 0 015.656 0M9 10h.01M15 10h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})}),s.jsx("p",{className:"text-gray-500",children:"Aucune vente trouvée pour cette période"}),s.jsx("button",{onClick:()=>u({dateDebut:"",dateFin:"",statut:"tous",typeVente:"tous",search:"",viewMode:"all"}),className:"btn btn-sm btn-ghost mt-2",children:"Réinitialiser les filtres"})]})})})})]})}),E>1&&s.jsxs("div",{className:"flex justify-between items-center p-4 border-t",children:[s.jsx("div",{children:s.jsxs("span",{className:"text-sm text-gray-600",children:["Affichage de ",(l-1)*g+1," à ",Math.min(l*g,j.length)," sur ",j.length," ventes"]})}),s.jsxs("div",{className:"join",children:[s.jsx("button",{className:"join-item btn btn-sm",disabled:l===1,onClick:()=>h(c=>c-1),children:"«"}),Array.from({length:Math.min(5,E)},(c,m)=>{let v;return E<=5||l<=3?v=m+1:l>=E-2?v=E-4+m:v=l-2+m,s.jsx("button",{className:`join-item btn btn-sm ${l===v?"btn-active":""}`,onClick:()=>h(v),children:v},v)}),s.jsx("button",{className:"join-item btn btn-sm",disabled:l===E,onClick:()=>h(c=>c+1),children:"»"})]})]}),s.jsxs("div",{className:"bg-base-200 p-6 rounded-lg shadow mb-8",children:[s.jsx("h2",{className:"text-xl font-semibold mb-4",children:"État des Stocks"}),a&&a.length>0?s.jsxs(s.Fragment,{children:[s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6 mb-6",children:[s.jsx("div",{className:"stats bg-base-100",children:s.jsxs("div",{className:"stat",children:[s.jsx("div",{className:"stat-title",children:"Produits en stock"}),s.jsx("div",{className:"stat-value",children:a.length})]})}),s.jsx("div",{className:"stats bg-base-100",children:s.jsxs("div",{className:"stat",children:[s.jsx("div",{className:"stat-title",children:"Produits en alerte"}),s.jsx("div",{className:"stat-value",children:a.filter(c=>c.quantite<=c.quantite_alerte).length})]})}),s.jsx("div",{className:"stats bg-base-100",children:s.jsxs("div",{className:"stat",children:[s.jsx("div",{className:"stat-title",children:"Valeur totale du stock"}),s.jsxs("div",{className:"stat-value",children:[i.toLocaleString("fr-FR"),"FC"]})]})})]}),s.jsx("div",{className:"overflow-x-auto",children:s.jsxs("table",{className:"table w-full",children:[s.jsx("thead",{children:s.jsxs("tr",{children:[s.jsx("th",{children:"Produit"}),s.jsx("th",{children:"Catégorie"}),s.jsx("th",{children:"Rayon"}),s.jsx("th",{children:"Quantité"}),s.jsx("th",{children:"Niveau"})]})}),s.jsx("tbody",{children:a.slice(0,5).map(c=>s.jsxs("tr",{children:[s.jsx("td",{children:c.produit.nom}),s.jsx("td",{children:c.produit.categorie.name}),s.jsx("td",{children:c.rayon.nom}),s.jsx("td",{children:s.jsxs("div",{className:"flex items-center gap-2",children:[c.quantite,c.quantite<=c.quantite_alerte&&s.jsx("span",{className:"badge badge-error",children:"Alerte"})]})}),s.jsx("td",{children:s.jsx("progress",{className:`progress ${c.quantite<=c.quantite_alerte?"progress-error":c.quantite<=c.quantite_alerte*2?"progress-warning":"progress-success"}`,value:c.quantite,max:c.quantite_alerte*3})})]},c.id))})]})}),a.length>5&&s.jsx("div",{className:"text-center mt-4",children:s.jsxs("button",{className:"btn btn-sm btn-ghost",onClick:()=>document.getElementById("my_modal_4").showModal(),children:["Voir tous les stocks (",a.length,")"]})})]}):s.jsx("div",{className:"text-center py-8 text-gray-500",children:"Aucune information de stock disponible"})]})]}),s.jsx("dialog",{id:"my_modal_4",className:"modal",children:s.jsxs("div",{className:"modal-box w-11/12 max-w-5xl",children:[s.jsx("h3",{className:"font-bold text-lg",children:"Tout les Stocks!"}),s.jsx("p",{className:"py-4",children:"Une Apperçu Statistique"}),s.jsx("div",{className:"overflow-x-auto",children:s.jsxs("table",{className:"table w-full",children:[s.jsx("thead",{children:s.jsxs("tr",{children:[s.jsx("th",{children:"Produit"}),s.jsx("th",{children:"Catégorie"}),s.jsx("th",{children:"Rayon"}),s.jsx("th",{children:"Quantité"}),s.jsx("th",{children:"Niveau"})]})}),s.jsx("tbody",{children:a.map(c=>s.jsxs("tr",{children:[s.jsx("td",{children:c.produit.nom}),s.jsx("td",{children:c.produit.categorie.name}),s.jsx("td",{children:c.rayon.nom}),s.jsx("td",{children:s.jsxs("div",{className:"flex items-center gap-2",children:[c.quantite,c.quantite<=c.quantite_alerte&&s.jsx("span",{className:"badge badge-error",children:"Alerte"})]})}),s.jsx("td",{children:s.jsx("progress",{className:`progress ${c.quantite<=c.quantite_alerte?"progress-error":c.quantite<=c.quantite_alerte*2?"progress-warning":"progress-success"}`,value:c.quantite,max:c.quantite_alerte*3})})]},c.id))})]})}),s.jsx("div",{className:"modal-action",children:s.jsxs("form",{method:"dialog",children:[s.jsx("button",{className:"btn btn-sm btn-circle btn-ghost absolute right-2 top-2",children:"✕"}),s.jsx("button",{className:"btn",children:"Close"})]})})]})}),s.jsxs("div",{className:"flex justify-between items-center",children:[s.jsxs("button",{onClick:()=>window.print(),className:"btn btn-outline",children:[s.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5 mr-2",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M17 17h2a2 2 0 002-2v-4a2 2 0 00-2-2H5a2 2 0 00-2 2v4a2 2 0 002 2h2m2 4h6a2 2 0 002-2v-4a2 2 0 00-2-2H9a2 2 0 00-2 2v4a2 2 0 002 2zm8-12V5a2 2 0 00-2-2H9a2 2 0 00-2 2v4h10z"})}),"Imprimer"]}),s.jsxs("button",{onClick:U,className:"btn btn-primary",children:[s.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5 mr-2",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 16v1a3 3 0 003 3h10a3 3 0 003-3v-1m-4-4l-4 4m0 0l-4-4m4 4V4"})}),"Exporter les données"]})]})]})]})}export{ls as default};
