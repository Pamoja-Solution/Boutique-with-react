import{r as u,j as e,$ as p,Y as l}from"./app-B23DAWnI.js";import{C as v,B as g,a as N,b as f,L as w,p as y}from"./chart-DVLgdDZC.js";import{A as C}from"./AuthenticatedLayout-0KYg-M3D.js";import"./Dropdown-CXHqaqRy.js";import"./Actif-K1GKpZJs.js";import"./index-DbdOwL2t.js";v.register(g,N,f,w,y);const _=({salesTrend:a,timeRange:d})=>{const n=u.useRef(null);return u.useEffect(()=>{if(n.current){const x=n.current.getContext("2d");n.current._chartInstance&&n.current._chartInstance.destroy();const h=a[d]||[],m=h.map(r=>new Date(r.date).toLocaleDateString("fr-FR",{day:"numeric",month:"numeric"})),j=h.map(r=>r.total);n.current._chartInstance=new v(x,{type:"bar",data:{labels:m,datasets:[{label:"Total des ventes",data:j,backgroundColor:"rgba(59, 130, 246, 0.6)",borderColor:"rgba(59, 130, 246, 1)",borderWidth:1,hoverBackgroundColor:"rgba(37, 99, 235, 0.8)"}]},options:{responsive:!0,maintainAspectRatio:!1,plugins:{tooltip:{callbacks:{label:r=>{const c=r.raw||0;return new Intl.NumberFormat("fr-FR",{style:"currency",currency:"CDF"}).format(c)}}}},scales:{x:{grid:{display:!1}},y:{ticks:{callback:r=>new Intl.NumberFormat("fr-FR",{style:"currency",currency:"CDF"}).format(r)}}}}})}},[a,d]),e.jsx("div",{className:"w-full h-96 p-4 bg-base-100 rounded-lg shadow-md",children:a[d]&&a[d].length>0?e.jsx("canvas",{ref:n}):e.jsx("div",{className:"text-center text-gray-500",children:"Aucune donnée à afficher"})})};function B({stats:a,recentSales:d,topProducts:n,bestCustomers:x,stockAlerts:h,cashierStatus:m,salesTrend:j,recentActivities:r}){const[c,i]=u.useState("7days"),o=s=>new Intl.NumberFormat("fr-FR",{style:"currency",currency:"CDF",minimumFractionDigits:0}).format(s).replace("CDF","FC");return e.jsxs(C,{header:e.jsx("h2",{className:"text-xl font-semibold leading-tight text-gray-800",children:"Tableau de Bord"}),children:[e.jsx(p,{title:"Tableau de Bord"}),e.jsxs("div",{className:"flex-1 overflow-y-auto p-4 bg-base-200",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4 mb-6",children:[e.jsx("div",{className:"stats shadow bg-base-100",children:e.jsxs("div",{className:"stat",children:[e.jsx("div",{className:"stat-figure text-primary",children:e.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6",viewBox:"0 0 20 20",fill:"currentColor",children:[e.jsx("path",{d:"M8.433 7.418c.155-.103.346-.196.567-.267v1.698a2.305 2.305 0 01-.567-.267C8.07 8.34 8 8.114 8 8c0-.114.07-.34.433-.582zM11 12.849v-1.698c.22.071.412.164.567.267.364.243.433.468.433.582 0 .114-.07.34-.433.582a2.305 2.305 0 01-.567.267z"}),e.jsx("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm1-13a1 1 0 10-2 0v.092a4.535 4.535 0 00-1.676.662C6.602 6.234 6 7.009 6 8c0 .99.602 1.765 1.324 2.246.48.32 1.054.545 1.676.662v1.941c-.391-.127-.68-.317-.843-.504a1 1 0 10-1.51 1.31c.562.649 1.413 1.076 2.353 1.253V15a1 1 0 102 0v-.092a4.535 4.535 0 001.676-.662C13.398 13.766 14 12.991 14 12c0-.99-.602-1.765-1.324-2.246A4.535 4.535 0 0011 9.092V7.151c.391.127.68.317.843.504a1 1 0 101.511-1.31c-.563-.649-1.413-1.076-2.354-1.253V5z",clipRule:"evenodd"})]})}),e.jsx("div",{className:"stat-title",children:"Ventes (Aujourd'hui)"}),e.jsx("div",{className:"stat-value text-primary",children:o(a.today_sales)}),e.jsxs("div",{className:`stat-desc ${a.sales_change>=0?"text-success":"text-error"}`,children:[a.sales_change>=0?"↗︎":"↘︎"," ",Math.abs(a.sales_change),"% par rapport à hier"]})]})}),e.jsx("div",{className:"stats shadow bg-base-100",children:e.jsxs("div",{className:"stat",children:[e.jsx("div",{className:"stat-figure text-secondary",children:e.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6",viewBox:"0 0 20 20",fill:"currentColor",children:[e.jsx("path",{d:"M9 2a1 1 0 000 2h2a1 1 0 100-2H9z"}),e.jsx("path",{fillRule:"evenodd",d:"M4 5a2 2 0 012-2 3 3 0 003 3h2a3 3 0 003-3 2 2 0 012 2v11a2 2 0 01-2 2H6a2 2 0 01-2-2V5zm3 4a1 1 0 000 2h.01a1 1 0 100-2H7zm3 0a1 1 0 000 2h3a1 1 0 100-2h-3zm-3 4a1 1 0 100 2h.01a1 1 0 100-2H7zm3 0a1 1 0 100 2h3a1 1 0 100-2h-3z",clipRule:"evenodd"})]})}),e.jsx("div",{className:"stat-title",children:"Transactions"}),e.jsx("div",{className:"stat-value text-secondary",children:a.today_transactions}),e.jsxs("div",{className:`stat-desc ${a.transactions_change>=0?"text-success":"text-error"}`,children:[a.transactions_change>=0?"↗︎":"↘︎"," ",Math.abs(a.transactions_change)," de plus qu'hier"]})]})}),e.jsx("div",{className:"stats shadow bg-base-100",children:e.jsxs("div",{className:"stat",children:[e.jsx("div",{className:"stat-figure text-warning",children:e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6",viewBox:"0 0 20 20",fill:"currentColor",children:e.jsx("path",{fillRule:"evenodd",d:"M8.257 3.099c.765-1.36 2.722-1.36 3.486 0l5.58 9.92c.75 1.334-.213 2.98-1.742 2.98H4.42c-1.53 0-2.493-1.646-1.743-2.98l5.58-9.92zM11 13a1 1 0 11-2 0 1 1 0 012 0zm-1-8a1 1 0 00-1 1v3a1 1 0 002 0V6a1 1 0 00-1-1z",clipRule:"evenodd"})})}),e.jsx("div",{className:"stat-title",children:"Stock critique"}),e.jsx("div",{className:"stat-value text-warning",children:a.low_stock_items}),e.jsx("div",{className:"stat-desc",children:"Produits à réapprovisionner"})]})}),e.jsx("div",{className:"stats shadow bg-base-100",children:e.jsxs("div",{className:"stat",children:[e.jsx("div",{className:"stat-figure text-success",children:e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6",viewBox:"0 0 20 20",fill:"currentColor",children:e.jsx("path",{fillRule:"evenodd",d:"M5 2a2 2 0 00-2 2v14l3.5-2 3.5 2 3.5-2 3.5 2V4a2 2 0 00-2-2H5zm4.707 3.707a1 1 0 00-1.414-1.414l-3 3a1 1 0 000 1.414l3 3a1 1 0 001.414-1.414L8.414 9H10a3 3 0 013 3v1a1 1 0 102 0v-1a5 5 0 00-5-5H8.414l1.293-1.293z",clipRule:"evenodd"})})}),e.jsx("div",{className:"stat-title",children:"Bénéfice (Aujourd'hui)"}),e.jsx("div",{className:"stat-value text-success",children:o(a.today_profit)}),e.jsxs("div",{className:`stat-desc ${a.profit_change>=0?"text-success":"text-error"}`,children:[a.profit_change>=0?"↗︎":"↘︎"," ",Math.abs(a.profit_change),"% par rapport à hier"]})]})})]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-4 mb-6",children:[e.jsx("div",{className:"card bg-base-100 shadow-xl lg:col-span-2",children:e.jsxs("div",{className:"card-body",children:[e.jsxs("h2",{className:"card-title flex justify-between",children:[e.jsx("span",{children:"Tendance des ventes"}),e.jsxs("div",{className:"dropdown dropdown-end",children:[e.jsxs("div",{tabIndex:0,role:"button",className:"btn btn-xs btn-ghost",children:[e.jsxs("span",{children:[c==="7days"&&"7 derniers jours",c==="30days"&&"30 derniers jours",c==="year"&&"Cette année"]}),e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-4 w-4",viewBox:"0 0 20 20",fill:"currentColor",children:e.jsx("path",{fillRule:"evenodd",d:"M5.293 7.293a1 1 0 011.414 0L10 10.586l3.293-3.293a1 1 0 111.414 1.414l-4 4a1 1 0 01-1.414 0l-4-4a1 1 0 010-1.414z",clipRule:"evenodd"})})]}),e.jsxs("ul",{tabIndex:0,className:"dropdown-content menu p-2 shadow bg-base-100 rounded-box w-52 z-10",children:[e.jsx("li",{children:e.jsx("button",{onClick:()=>i("7days"),children:"7 derniers jours"})}),e.jsx("li",{children:e.jsx("button",{onClick:()=>i("30days"),children:"30 derniers jours"})}),e.jsx("li",{children:e.jsx("button",{onClick:()=>i("year"),children:"Cette année"})})]})]})]}),e.jsx("div",{className:"h-64 w-full",children:e.jsxs("div",{className:"w-full h-full bg-base-200 rounded-lg flex items-center justify-center",children:[e.jsx("div",{className:"flex justify-center mb-4",children:e.jsxs("div",{className:"btn-group",children:[e.jsx("button",{className:`btn ${c==="7days"?"btn-primary":""}`,onClick:()=>i("7days"),children:"7 jours"}),e.jsx("button",{className:`btn ${c==="30days"?"btn-primary":""}`,onClick:()=>i("30days"),children:"30 jours"}),e.jsx("button",{className:`btn ${c==="year"?"btn-primary":""}`,onClick:()=>i("year"),children:"Année"})]})}),e.jsx(_,{salesTrend:j,timeRange:c})]})})]})}),e.jsx("div",{className:"card bg-base-100 shadow-xl",children:e.jsxs("div",{className:"card-body",children:[e.jsx("h2",{className:"card-title",children:"Activité récente"}),e.jsx("div",{className:"space-y-3 max-h-64 overflow-y-auto",children:r.map((s,t)=>e.jsxs("div",{className:"flex gap-3 items-start",children:[e.jsx("div",{className:"avatar placeholder",children:e.jsx("div",{className:`bg-${s.color} text-${s.color}-content w-8 h-8 rounded-full`,children:e.jsx("span",{className:"text-xs",children:s.type})})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium",children:s.description}),e.jsxs("p",{className:"text-xs opacity-70",children:[s.date," • ",s.user]})]})]},t))}),e.jsx("div",{className:"card-actions justify-end",children:e.jsx(l,{href:route("activities.index"),className:"btn btn-sm btn-ghost",children:"Voir tout"})})]})})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 mb-4",children:[e.jsx("div",{className:"card bg-base-100 shadow-xl",children:e.jsxs("div",{className:"card-body",children:[e.jsx("h2",{className:"card-title",children:"Produits les plus vendus"}),e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"table table-zebra table-sm",children:[e.jsx("thead",{children:e.jsxs("tr",{children:[e.jsx("th",{children:"Produit"}),e.jsx("th",{children:"Vendu"}),e.jsx("th",{children:"Revenu"})]})}),e.jsx("tbody",{children:n.map((s,t)=>e.jsxs("tr",{children:[e.jsx("td",{children:e.jsxs("div",{className:"flex items-center gap-2",children:[s.image&&e.jsx("div",{className:"avatar",children:e.jsx("div",{className:"w-8 h-8 rounded",children:e.jsx("img",{src:s.image,alt:s.name})})}),e.jsx("span",{children:s.name})]})}),e.jsxs("td",{children:[s.quantity," unités"]}),e.jsx("td",{children:o(s.revenue)})]},t))})]})}),e.jsx("div",{className:"card-actions justify-end mt-2",children:e.jsx(l,{href:route("produits.index"),className:"btn btn-sm btn-ghost",children:"Voir tous les produits"})})]})}),e.jsx("div",{className:"card bg-base-100 shadow-xl",children:e.jsxs("div",{className:"card-body",children:[e.jsx("h2",{className:"card-title",children:"Meilleurs clients"}),e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"table table-zebra table-sm",children:[e.jsx("thead",{children:e.jsxs("tr",{children:[e.jsx("th",{children:"Client"}),e.jsx("th",{children:"Achats"}),e.jsx("th",{children:"Dépenses"})]})}),e.jsx("tbody",{children:x.map((s,t)=>e.jsxs("tr",{children:[e.jsxs("td",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"avatar placeholder",children:e.jsx("div",{className:"bg-neutral text-neutral-content w-6 h-6 rounded-full",children:e.jsx("span",{className:"text-xs",children:s.name.split(" ").map(b=>b[0]).join("")})})}),e.jsx("span",{children:s.name})]}),e.jsxs("td",{children:[s.purchases," trans."]}),e.jsx("td",{children:o(s.total_spent)})]},t))})]})}),e.jsx("div",{className:"card-actions justify-end mt-2",children:e.jsx(l,{href:route("clients.index"),className:"btn btn-sm btn-ghost",children:"Voir tous les clients"})})]})})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:[e.jsx("div",{className:"card bg-base-100 shadow-xl",children:e.jsxs("div",{className:"card-body",children:[e.jsxs("h2",{className:"card-title text-accent flex items-center gap-2",children:[e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",viewBox:"0 0 20 20",fill:"currentColor",children:e.jsx("path",{fillRule:"evenodd",d:"M8.257 3.099c.765-1.36 2.722-1.36 3.486 0l5.58 9.92c.75 1.334-.213 2.98-1.742 2.98H4.42c-1.53 0-2.493-1.646-1.743-2.98l5.58-9.92zM11 13a1 1 0 11-2 0 1 1 0 012 0zm-1-8a1 1 0 00-1 1v3a1 1 0 002 0V6a1 1 0 00-1-1z",clipRule:"evenodd"})}),"Alertes de stock"]}),e.jsx("div",{className:"space-y-2 max-h-40 overflow-y-auto",children:h.length>0?h.map((s,t)=>e.jsxs("div",{className:"flex justify-between items-center p-2 bg-accent bg-opacity-10 rounded-lg",children:[e.jsxs("div",{children:[e.jsx("span",{children:s.product_name}),e.jsxs("div",{className:"text-xs opacity-70",children:["Rayon: ",s.rayon_name]})]}),e.jsxs("span",{className:"badge badge-accent",children:[s.current_quantity," restants"]})]},t)):e.jsx("div",{className:"text-center py-4 text-sm opacity-70",children:"Aucune alerte de stock pour le moment"})}),e.jsx("div",{className:"card-actions justify-end mt-2",children:e.jsx(l,{href:route("stocks.index"),className:"btn btn-sm btn-warning btn-outline",children:"Gérer les stocks"})})]})}),e.jsx("div",{className:"card bg-base-100 shadow-xl",children:e.jsxs("div",{className:"card-body",children:[e.jsxs("h2",{className:"card-title text-primary flex items-center gap-2",children:[e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",viewBox:"0 0 20 20",fill:"currentColor",children:e.jsx("path",{d:"M3 1a1 1 0 000 2h1.22l.305 1.222a.997.997 0 00.01.042l1.358 5.43-.893.892C3.74 11.846 4.632 14 6.414 14H15a1 1 0 000-2H6.414l1-1H14a1 1 0 00.894-.553l3-6A1 1 0 0017 3H6.28l-.31-1.243A1 1 0 005 1H3zM16 16.5a1.5 1.5 0 11-3 0 1.5 1.5 0 013 0zM6.5 18a1.5 1.5 0 100-3 1.5 1.5 0 000 3z"})}),"Dernières ventes"]}),e.jsx("div",{className:"space-y-2 max-h-40 overflow-y-auto",children:d.length>0?d.map((s,t)=>e.jsxs("div",{className:"flex justify-between items-center p-2 bg-primary bg-opacity-10 rounded-lg",children:[e.jsxs("div",{children:[e.jsxs("span",{className:"font-medium",children:["Vente #",s.code]}),e.jsxs("div",{className:"text-xs opacity-70",children:[new Date(s.created_at).toLocaleTimeString()," • ",s.client_name||"Client occasionnel"]})]}),e.jsx("span",{className:"font-medium",children:o(s.total_ttc)})]},t)):e.jsx("div",{className:"text-center py-4 text-sm opacity-70",children:"Aucune vente récente"})}),e.jsx("div",{className:"card-actions justify-end mt-2",children:e.jsx(l,{href:route("point-de-vente"),className:"btn btn-sm btn-primary",children:"Nouvelle vente"})})]})}),e.jsx("div",{className:"card bg-base-100 shadow-xl",children:e.jsxs("div",{className:"card-body",children:[e.jsxs("h2",{className:"card-title text-info flex items-center gap-2",children:[e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",viewBox:"0 0 20 20",fill:"currentColor",children:e.jsx("path",{fillRule:"evenodd",d:"M4 4a2 2 0 00-2 2v4a2 2 0 002 2V6h10a2 2 0 00-2-2H4zm2 6a2 2 0 012-2h8a2 2 0 012 2v4a2 2 0 01-2 2H8a2 2 0 01-2-2v-4zm6 4a2 2 0 100-4 2 2 0 000 4z",clipRule:"evenodd"})}),"Statut des caisses"]}),e.jsx("div",{className:"space-y-2 max-h-40 overflow-y-auto",children:m.map((s,t)=>e.jsxs("div",{className:"flex justify-between items-center p-2 bg-info bg-opacity-10 rounded-lg",children:[e.jsxs("div",{children:[e.jsx("span",{className:"font-medium",children:s.name}),e.jsxs("div",{className:"text-xs opacity-70",children:[s.is_active?`Ouverte à ${s.opened_at}`:"Fermée"," • ",s.devise_code]})]}),e.jsx("span",{className:"font-medium",children:o(s.solde_actuel)})]},t))}),e.jsx("div",{className:"card-actions justify-end mt-2",children:e.jsx(l,{href:route("caisses.index"),className:"btn btn-sm btn-info btn-outline",children:"Gérer les caisses"})})]})})]}),e.jsx("div",{className:"mt-6 card bg-base-100 shadow-xl",children:e.jsxs("div",{className:"card-body",children:[e.jsx("h2",{className:"card-title",children:"Actions Rapides"}),e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 lg:grid-cols-6 gap-2",children:[e.jsx(l,{href:route("point-de-vente"),className:"btn btn-sm btn-primary",children:"Nouvelle Vente"}),e.jsx(l,{href:route("produits.index"),className:"btn btn-sm btn-secondary",children:"Ajouter Produit"}),e.jsx(l,{href:route("gererClients.index"),className:"btn btn-sm btn-accent",children:"Ajouter Client"}),e.jsx(l,{href:route("stocks.indexs"),className:"btn btn-sm btn-info",children:"Ajuster Stock"}),e.jsx(l,{href:route("depenses.index"),className:"btn btn-sm btn-warning",children:"Enregistrer Dépense"}),e.jsx(l,{href:route("inventaires.index"),className:"btn btn-sm btn-success",children:"Nouvel Inventaire"})]})]})})]})]})}export{B as default};
