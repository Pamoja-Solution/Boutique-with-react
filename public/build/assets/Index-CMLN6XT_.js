import{q as c,R as a,j as e,$ as o,Y as r,m}from"./app-CFD2f151.js";import{A as x}from"./AuthenticatedLayout-Ddn20-Xk.js";import{V as n}from"./index-B9tAU3jH.js";import"./Actif-BSdadqrY.js";function f({auth:i,caisses:l}){const{flash:t}=c().props;a.useEffect(()=>{t.success&&n.success(t.success),t.error&&n.error(t.error)},[t]);const d=s=>{m.post(route("caisses.toggle-status",s.id),{preserveScroll:!0})};return e.jsxs(x,{children:[e.jsx(o,{title:"Gestion des Caisses"}),e.jsxs("div",{className:"container mx-auto px-4 py-8",children:[e.jsxs("div",{className:"flex justify-between items-center mb-8",children:[e.jsx("h1",{className:"text-3xl font-bold",children:"Gestion des Caisses"}),i.user.role==="admin"&&e.jsx(r,{href:route("caisses.create"),className:"btn btn-primary",children:"Créer une nouvelle caisse"})]}),e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"table",children:[e.jsx("thead",{children:e.jsxs("tr",{children:[e.jsx("th",{children:"Nom"}),e.jsx("th",{children:"Devise"}),e.jsx("th",{children:"Solde Initial"}),e.jsx("th",{children:"Solde Actuel"}),e.jsx("th",{children:"Statut"}),e.jsx("th",{children:"Actions"})]})}),e.jsx("tbody",{children:l.map(s=>e.jsxs("tr",{children:[e.jsx("td",{children:s.name}),e.jsxs("td",{children:[s.devise.symbole," (",s.devise.code,")"]}),e.jsxs("td",{children:[s.solde_initial.toFixed(2)," ",s.devise.symbole," "]}),e.jsx("td",{className:s.solde_actuel<s.solde_initial?"text-error":"text-success",children:s.solde_actuel.toFixed(2)}),e.jsx("td",{children:e.jsx("span",{className:`badge ${s.is_active?"badge-success":"badge-error"}`,children:s.is_active?"Active":"Inactive"})}),e.jsxs("td",{className:"flex gap-2",children:[i.user.role==="admin"&&e.jsxs(e.Fragment,{children:[e.jsx(r,{href:route("caisses.edit",s.id),className:"btn btn-sm btn-info",children:"Éditer"}),e.jsx("button",{onClick:()=>d(s),className:`btn btn-sm ${s.is_active?"btn-warning":"btn-success"}`,children:s.is_active?"Fermer":"Ouvrir"}),!s.is_active&&e.jsx("button",{onClick:()=>{confirm("Supprimer cette caisse ?")&&Inertia.delete(route("caisses.destroy",s.id))},className:"btn btn-sm btn-error",children:"Supprimer"})]}),e.jsx(r,{href:route("caisses.mouvements.index",s.id),className:"btn btn-sm btn-neutral",children:"Mouvements"})]})]},s.id))})]})})]})]})}export{f as default};
